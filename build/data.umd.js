!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).Data={})}(this,function(t){function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return e(t,i);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(s=function(){return!!t})()}function u(){u=function(){return e};var t,e={},i=Object.prototype,n=i.hasOwnProperty,r=Object.defineProperty||function(t,e,i){t[e]=i.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function v(t,e,i,n){var o=Object.create((e&&e.prototype instanceof g?e:g).prototype),s=new L(n||[]);return r(o,"_invoke",{value:x(t,i,s)}),o}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=v;var f="suspendedStart",p="suspendedYield",d="executing",w="completed",y={};function g(){}function m(){}function B(){}var U={};l(U,s,function(){return this});var _=Object.getPrototypeOf,b=_&&_(_(O([])));b&&b!==i&&n.call(b,s)&&(U=b);var X=B.prototype=g.prototype=Object.create(U);function k(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function R(t,e){function i(r,o,s,u){var a=c(t[r],t,o);if("throw"!==a.type){var h=a.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then(function(t){i("next",t,s,u)},function(t){i("throw",t,s,u)}):e.resolve(l).then(function(t){h.value=t,s(h)},function(t){return i("throw",t,s,u)})}u(a.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e(function(e,r){i(t,n,e,r)})}return o=o?o.then(r,r):r()}})}function x(e,i,n){var r=f;return function(o,s){if(r===d)throw Error("Generator is already running");if(r===w){if("throw"===o)throw s;return{value:t,done:!0}}for(n.method=o,n.arg=s;;){var u=n.delegate;if(u){var a=I(u,n);if(a){if(a===y)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=w,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var h=c(e,i,n);if("normal"===h.type){if(r=n.done?w:p,h.arg===y)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r=w,n.method="throw",n.arg=h.arg)}}}function I(e,i){var n=i.method,r=e.iterator[n];if(r===t)return i.delegate=null,"throw"===n&&e.iterator.return&&(i.method="return",i.arg=t,I(e,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=c(r,e.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,y;var s=o.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,y):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function O(e){if(e||""===e){var i=e[s];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function i(){for(;++r<e.length;)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return m.prototype=B,r(X,"constructor",{value:B,configurable:!0}),r(B,"constructor",{value:m,configurable:!0}),m.displayName=l(B,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,B):(t.__proto__=B,l(t,h,"GeneratorFunction")),t.prototype=Object.create(X),t},e.awrap=function(t){return{__await:t}},k(R.prototype),l(R.prototype,a,function(){return this}),e.AsyncIterator=R,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var s=new R(v(t,i,n,r),o);return e.isGeneratorFunction(i)?s:s.next().then(function(t){return t.done?t.value:s.next()})},k(X),l(X,h,"Generator"),l(X,s,function(){return this}),l(X,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return u.type="throw",u.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),h=n.call(s,"finallyLoc");if(a&&h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;E(i)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:O(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function h(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}function l(t,e){if(v(t))for(var i=0;i<t.length;i++)e(i,t[i]);else for(var n in t)e(n,t[n])}var v=Array.isArray,c=function(){},f=Symbol("value"),p=function(t){return new x(B.value(t))},d=Symbol("view"),w={value:f,view:d};p.random=function(t){return crypto.randomUUID()};var y=function(t){return void 0===t?void 0:t[d]?t[d].value:structuredClone(t)},g=/*#__PURE__*/function(){function t(){this.view=new B(this)}var e=t.prototype;return e.update=function(t,e){if(t instanceof x)throw new Error("cannot set value to another data, use a linked value instead");0===e.length?this.XU0(t):1===e.length?this.BU1([e[0],t]):this.BU2([e,t])},e.insert=function(t,e,i){if(t instanceof x)throw new Error("cannot set value to another data, use a linked value instead");i=void 0===i?i:""+i,0===e.length?this.BI0([i,t]):this.BI2([e,t,i])},e.remove=function(t){0===t.length?this.XR0():1===t.length?this.BR1([t[0]]):this.BR2([t])},e.XR0=function(){if(void 0===this.view.value)return!1;var t=this.view.value;this.view.value=void 0,this.view.XR0(t)},e.BR1A=function(t){for(var e=[],i=0;i<t.length;i++){var n,r=t[i],o=null==(n=this.view.value)?void 0:n[r];this.view.value.splice(r,1),e.push(r),e.push(o)}this.view.BR1(e)},e.BR1=function(t){if(v(this.view.value))return this.BR1A(t);for(var e=[],i=0;i<t.length;i++){var n,r=t[i],o=null==(n=this.view.value)?void 0:n[r];void 0!==o&&(delete this.view.value[r],e.push(r),e.push(o))}this.view.BR1(e)},e.BR2=function(t){var e=[];t:for(var i=0;i<t.length;i++){var n=t[i],r=n.slice().reverse(),o=r[0],s=r.slice(1),u=this.view.value;if("object"!=typeof u)return;for(;s.length;){var a=s.pop();if("object"!=typeof u)continue t;u=u[a]}if(void 0!==u[o]){var h=u[o];v(u)?u.splice(o,1):delete u[o],e.push(n,h)}}this.view.BR2(e)},e.XU0=function(t){this.view.value!==t&&(this.view.value=t,this.view.XU0())},e.BU1=function(t){var e=[],i=[];"object"!=typeof this.view.value&&(this.view.value={});for(var n=0;n<t.length;n++){var r,o,s=t[n++],u=t[n];(null==(r=this.view.value)?void 0:r[s])!==u&&(void 0===(null==(o=this.view.value)?void 0:o[s])?i.push(s,u):e.push(s,u),this.view.value[s]=u)}this.view.BU1(e),this.view.BI0(i)},e.BU2=function(t){"object"!=typeof this.view.value&&(this.view.value={});for(var e=0;e<t.length;e++){for(var i=t[e++],n=t[e],r=i.slice().reverse(),o=r[0],s=r.slice(1),u=this.view.value;s.length;){var a=s.pop();u="object"==typeof u[a]?u[a]:u[a]={}}u[o]!==n&&(u[o]=n)}this.view.BU2(t)},e.BI0=function(t){if(v(this.view.value))return this.BI0A(t);"object"!=typeof this.view.value&&(this.view.value={});for(var e=0;e<t.length;e++){var i,n,r,o=null!=(n=t[i=e++])?n:t[i]=""+p.random(this.view.value),s=t[e];(null==(r=this.view.value)?void 0:r[o])!==s&&(this.view.value[o]=s)}this.view.BI0(t)},e.BI0A=function(t){for(var e=0;e<t.length;e+=2){var i=t[e],n=t[e+1];void 0===i?t[e]=""+(this.view.value.push(n)-1):this.view.value.splice(i,0,n)}this.view.BI0(t)},e.BI2=function(t){"object"!=typeof this.view.value&&(this.view.value={});for(var e=0;e<t.length;e++){for(var i,n,r,o=t[e++],s=t[e++],u=o.slice().reverse(),a=this.view.value;u.length;){var h=u.pop();a="object"==typeof a[h]?a[h]:a[h]={}}v(a)?void 0===t[e]?null!=t[i=e]||(t[i]=""+(a.push(s)-1)):a.splice(t[e],0,s):a[null!=(r=t[n=e])?r:t[n]=""+p.random(a)]=s}this.view.BI2(t)},t}(),m=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e}(g),B=/*#__PURE__*/function(){function t(t){this.res=t,this.key=[],this.sinks=new Set,this.views=new Map}t.child=function(e,i){var n,r=new t(e.res);return r.p=e,r.key=[].concat(e.key,[i]),r.name=i,r.XU0(null==(n=e.value)?void 0:n[i]),r},t.value=function(t){if(t instanceof x)return new _(t);var e=new g;return e.XU0(t),e.view};var e=t.prototype;return e.XR0=function(t){var e=this;this.p&&(this.value=void 0),this.each(function(e,i){i.value===(null==t?void 0:t[e])&&void 0===i.value||i.XR0(null==t?void 0:t[e])}),this.sink(function(i){return i.XR0(t,e)})},e.BR1=function(t){if(t.length){if(v(this.value)){if(this.views.size){for(var e=Infinity,i=0;i<t.length&&(t[i]<e&&(e=t[i]),e);i+=2);this.V1(e)}}else for(var n=0;n<t.length;n+=2){var o;null==(o=this.get_named(t[n]))||o.XR0(t[n+1])}for(var s,u=r(this.sinks);!(s=u()).done;){var a=s.value.deref();a?a.BR1(t,this):this.sinks.delete(a)}}},e.BR2=function(t){for(var e=this,i=0;i<t.length;i++){var n,r,o=t[i++],s=o[0],u=o.slice(1),a=t[i];1===u.length?null==(n=this.get_named(s))||n.BR1([u[0],a]):null==(r=this.get_named(s))||r.BR2([u,a])}this.sink(function(i){return i.BR2(t,e)})},e.XU0=function(){var t,e=this;this.p&&(this.value=null==(t=this.p.value)?void 0:t[this.name]),this.each(function(t,i){var n;void 0!==(null==(n=e.value)?void 0:n[t])?i.XU0():void 0!==i.value&&i.XR0(i.value)}),this.sink(function(t){return t.XU0(e.value,e)})},e.BU1=function(t){var e,i=this;if(t.length){this.p&&(this.value=null==(e=this.p.value)?void 0:e[this.name]);for(var n=0;n<t.length;n++){var r;null==(r=this.get_named(t[n++]))||r.XU0()}this.sink(function(e){return e.BU1(t,i)})}},e.BU2=function(t){var e,i=this;this.p&&(this.value=null==(e=this.p.value)?void 0:e[this.name]);for(var n=0;n<t.length;n++){var r,o,s=t[n++],u=s[0],a=s.slice(1),h=t[n];1===a.length?null==(r=this.get_named(u))||r.BU1([a[0],h]):null==(o=this.get_named(u))||o.BU2([a,h])}this.sink(function(e){return e.BU2(t,i)})},e.BI0=function(t){var e,i=this;if(t.length){if(this.p&&(this.value=null==(e=this.p.value)?void 0:e[this.name]),v(this.value))return this.BI0A(t);for(var n=0;n<t.length;n++){var r;null==(r=this.get_named(t[n++]))||r.XU0()}this.sink(function(e){return e.BI0(t,i)})}},e.BI0A=function(t){var e=this;if(this.views.size){for(var i=Infinity,n=0;n<t.length;n+=2)t[n]<i&&(i=t[n]);this.V1(i)}this.sink(function(i){return i.BI0(t,e)})},e.BI2=function(t){var e,i=this;this.p&&(this.value=null==(e=this.p.value)?void 0:e[this.name]);for(var n=0;n<t.length;){var r,o,s=t[n++],u=s[0],a=s.slice(1),h=t[n++],l=t[n++];a.length?null==(r=this.get_named(u))||r.BI2([a,h,l]):null==(o=this.get_named(u))||o.BI0([l,h])}this.sink(function(e){return e.BI2(t,i)})},e.V1=function(t){for(var e=t;e<this.value.length+1;e++){var i=this.get_named(""+e);i&&i.value!==this.value[e]&&i.XU0()}},e.some_sink=function(t){for(var e,i,n=r(this.sinks);!(i=n()).done;){var o=i.value,s=null==o.deref?void 0:o.deref();if(s){if(e=t(o))return e}else this.sinks.delete(s)}},e.sink=function(t){for(var e,i=r(this.sinks);!(e=i()).done;){var n=e.value,o=null==n.deref?void 0:n.deref();o?t(o):this.sinks.delete(o)}},e.each=function(t){for(var e,i=r(this.views);!(e=i()).done;){var n=e.value,o=n[0],s=n[1],u=null==s.deref?void 0:s.deref();u?t(o,u):this.views.delete(o)}},e.get_or_create_named=function(e){var i,n;return null!=(i=null==(n=this.views.get(e))||null==n.deref?void 0:n.deref())?i:function(t,e,i){return t.set(e,new WeakRef(i)),i}(this.views,e,t.child(this,e))},e.get_named=function(t){var e,i=null==(e=this.views.get(t))||null==e.deref?void 0:e.deref();return i||this.views.delete(t),i},e.disconnect=function(t){for(var e,i=r(this.sinks);!(e=i()).done;){var n=e.value,o=null==n.deref?void 0:n.deref();if(o===t){this.sinks.delete(n);break}o||this.sinks.delete(n)}},e.connect=function(t){this.sinks.add(new WeakRef(t))},t}(),U=function(){},_=/*#__PURE__*/function(t){function e(e){var i;return(i=t.call(this)||this).src=e[w.view],i.update(i.src),i}o(e,t);var i=e.prototype;return i.update=function(t,e){if(void 0===e&&(e=[]),e.length)return this.src.res.update(t,e);if(t instanceof x&&(t=t[w.view]),!(t instanceof B))throw new Error("cannot set linked value to non-reactive source");this.src.disconnect(this),this.src=t,this.src.connect(this),this.XU0(this.src.value)},i.insert=function(){var t;return(t=this.src.res).insert.apply(t,[].slice.call(arguments))},i.remove=function(){var t;return(t=this.src.res).remove.apply(t,[].slice.call(arguments))},i.XU0=function(t){var e=this;this.sink(function(i){return i.XU0(t,e)})},i.BU1=function(t){var e=this;this.sink(function(i){return i.BU1(t,e)})},i.BU2=function(t){var e=this;this.sink(function(i){return i.BU2(t,e)})},i.XR0=function(t){var e=this;this.sink(function(i){return i.XR0(t,e)})},i.BR1=function(t){var e=this;this.sink(function(i){return i.BR1(t,e)})},i.BR2=function(t){var e=this;this.sink(function(i){return i.BR2(t,e)})},i.BI0=function(t){var e=this;this.sink(function(i){return i.BI0(t,e)})},i.BI2=function(t){var e=this;this.sink(function(i){return i.BI2(t,e)})},n(e,[{key:"value",get:function(){return this.src.value}},{key:"res",get:function(){return this},set:function(t){}}])}(B);function b(t,e){for(var i=0;i<t.length;i++)e(t[i++],t[i])}var X=/*#__PURE__*/function(){function t(t,e){var i=this;this.update=function(t,e){return i.arr.push({type:"update",key:t,value:y(e)})},this.remove=function(t,e){return i.arr.push({type:"remove",key:t,value:y(e)})},this.insert=function(t,e,n){return i.arr.push({type:"insert",key:t,value:y(e),at:n})},this.p=t,this.arr=e,this.update([],t.value)}var e=t.prototype;return e.XU0=function(t){this.update([],t)},e.BU1=function(t){var e=this;b(t,function(t,i){return e.update([t],i)})},e.BU2=function(t){var e=this;b(t,function(t,i){return e.update(t,i)})},e.BI0=function(t){var e=this;b(t,function(t,i){return e.insert([],i,t)})},e.BI2=function(t){var e=this;!function(t,e){for(var i=0;i<t.length;i++)e(t[i++],t[i++],t[i])}(t,function(t,i,n){return e.insert(t,i,n)})},e.XR0=function(t){this.remove([],t)},e.BR1=function(t){var e=this;b(t,function(t,i){return e.remove([t],i)})},e.BR2=function(t){var e=this;b(t,function(t,i){return e.remove(t,i)})},e.R0=function(t){this.arr.push({type:"remove",key:[],value:y(t)})},e.R1=function(t,e){this.arr.push({type:"remove",key:[t],value:y(e)})},e.R2=function(t,e){this.arr.push({type:"remove",key:t,value:y(e)})},e.U0=function(t){this.arr.push({type:"update",key:[],value:y(t)})},e.U1=function(t,e){this.arr.push({type:"update",key:[t],value:y(e)})},e.U2=function(t,e){this.arr.push({type:"update",key:t,value:y(e)})},e.I0=function(t,e){this.arr.push({type:"insert",value:y(t),at:e})},e.I1=function(t,e,i){this.arr.push({type:"insert",key:[t],value:y(e),at:i})},e.I2=function(t,e,i){this.arr.push({type:"insert",key:t,value:y(e),at:i})},t}(),k=new WeakMap,R=/*#__PURE__*/function(t){function e(e,i,n){var r,o;(o=t.call(this)||this).p=void 0,o.obj=void 0,o.prop=void 0,o.p=e,o.obj=i,o.prop=n,o.obj[n]=e.value;var s=null!=(r=k.get(i))?r:new Set;return s.add(o),k.set(i,s),o}o(e,t);var i=e.prototype;return i.XU0=function(t){this.obj[this.prop]=t},i.XR0=function(){this.XU0(this.p.value)},i.BU1=function(){this.XU0(this.p.value)},i.BR1=function(){this.XU0(this.p.value)},i.BI0=function(){this.XU0(this.p.value)},i.BU2=function(){this.XU0(this.p.value)},i.BR2=function(){this.XU0(this.p.value)},i.BI2=function(){this.XU0(this.p.value)},e}(U),x=/*#__PURE__*/function(){function t(t){return this.view=void 0,this.view=t,new Proxy(c,this)}var e=t.prototype;return e.deleteProperty=function(t,e){var i=this.view,n=i.res,r=i.key,o=e===w.value?r:[].concat(r,[""+e]);return n.remove(o),!0},e.set=function(t,e,i){var n=this.view,r=n.res,o=n.key,s=e===w.value?o:[].concat(o,[e]);return r.update(i,s),!0},e.get=function(e,i){var n=this;return i===Symbol.toPrimitive?function(t){var e;return t?null==(e=n.view.value)?void 0:e.toString():+n.view.value}:i===Symbol.iterator?this.iterator:i===w.reactive||(i===w.view?this.view:i===w.value?this.view.value:new t(this.view.get_or_create_named(i)))},e.apply=function(e,i,n){var r,o=this.view,u=o.p,h=o.name;if(!u)throw new Error("cannot invoke a root value!");if("connect"===h)return q.apply(void 0,[u].concat(n));var l=null==(r=H[h])?void 0:r.call.apply(r,[H].concat(n));if(l){var v=u.some_sink(function(t){if(t instanceof l)return t.matches.apply(t,n)});return v||u.sinks.add(new WeakRef(v=function(t,e,i){if(s())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(t.bind.apply(t,n));return i&&a(r,i.prototype),r}(l,[u].concat(n)))),new t(v.view)}var c=n[0],f=n[1];return"remove"===h?this.view.res.remove(u.key):"update"===h?this.view.res.update(c,u.key):"insert"===h?this.view.res.insert(c,u.key,f):void 0},e.getPrototypeOf=function(e){return t.prototype},e.iterator=function(t){var e=this;return void 0===t&&(t=0),/*#__PURE__*/u().mark(function i(){return u().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,e[t++];case 3:i.next=0;break;case 5:case"end":return i.stop()}},i)})()},t}(),I=/*#__PURE__*/function(t){function e(e,i,n){var r;return(r=t.call(this)||this).p=e,r.col=i,r.plo=n[0],r.phi=n[1],r.sorted=[],r.find=J(function(t){return r.p.value[t][i]}),n instanceof x?n.connect(r,"extent"):(n[0].connect(r,"lo"),n[1].connect(r,"hi")),r.XU0(e.value),r}o(e,t);var i=e.prototype;return i.matches=function(t,e){return this.col===t&&this.plo===e[0]&&this.phi===e[1]},i.XU0=function(e){var i=this,n=this.col;if(this.lo_index=void 0,this.hi_index=void 0,"object"!=typeof e)return t.prototype.XU0.call(this);var r=v(e)?[]:{};this.sorted=[],l(e,function(t,o){i.sorted.push(""+t),o[n]>=i.lo_val&&o[n]<=i.hi_val&&(r[t]=e[t])}),this.sorted.sort(function(t,i){var r=e[t][n],o=e[i][n];return r>o?1:r<o?-1:0}),t.prototype.XU0.call(this,r)},n(e,[{key:"lo",set:function(t){this.extent=t>this.hi_val?[this.hi_val,t]:[t,this.hi_val]}},{key:"hi",set:function(t){this.extent=t<this.lo_val?[t,this.lo_val]:[this.lo_val,t]}},{key:"extent",set:function(t){var e,i=t[0],n=void 0===i?-Infinity:i,r=t[1],o=void 0===r?Infinity:r,s=(n=+n)<(o=+o)?n:o,u=n<o?o:n;if(!this.view.value)return this.lo_val=(e=[s,u])[0],this.hi_val=e[1],e;if(-Infinity===s&&Infinity===u){this.hi_index=this.lo_index=void 0;var a=[s,u];return this.lo_val=a[0],this.hi_val=a[1],this.view.XU0(this.view.value=this.p.value)}if(s===u){this.hi_index=this.lo_index=void 0;var h=[s,u];return this.lo_val=h[0],this.hi_val=h[1],this.view.XU0(this.view.value=v(this.p.value)?[]:{})}var l,c,f=[],p=[];if(null!=this.lo_index||(this.lo_index=this.find(this.sorted,this.lo_val)),null!=this.hi_index||(this.hi_index=this.find(this.sorted,this.hi_val)),u<this.hi_val){for(;(c=this.p.value[l=this.sorted[this.hi_index-1]])&&c[this.col]>u;)this.hi_index--,p.push(l,c),this.view.value[l]=void 0;this.lo_index>this.hi_index&&(this.lo_index=this.hi_index)}if(s>this.lo_val){for(;(c=this.p.value[l=this.sorted[this.lo_index]])&&c[this.col]<s;)this.lo_index++,p.push(l,c),this.view.value[l]=void 0;this.hi_index<this.lo_index&&(this.hi_index=this.lo_index)}if(u>this.hi_val)for(;(c=this.p.value[l=this.sorted[this.hi_index]])&&c[this.col]<u;)this.hi_index++,f.push(l,c),this.view.value[l]=c;if(s<this.lo_val)for(;(c=this.p.value[l=this.sorted[this.lo_index-1]])&&c[this.col]>s;)this.lo_index--,f.push(l,c),this.view.value[l]=c;this.lo_val=s,this.hi_val=u,this.view.BI0(f),this.view.BR1(p)}}])}(m),j=/*#__PURE__*/function(t){function e(e,i,n,r){var o;return(o=t.call(this)||this).p=e,o.n=r,o.col=i,o.col_name=n,o.XU0(e.value),o}o(e,t);var i=e.prototype;return i.matches=function(t,e){return this.col_name==t&&this.n==e},i.XR0=function(){this.sorted=[],this.view.XU0(this.view.value=[])},i.XU0=function(t){var e=this;if("object"!=typeof t)return this.XR0();this.sorted=Object.keys(t).sort(function(i,n){var r=e.col(t[i]),o=e.col(t[n]);return r>o?-1:r<o?1:0}),this.view.XU0(this.view.value=this.sorted.slice(0,this.n).map(function(e){return t[e]}))},i.BR1=function(e){for(var i=0;i<e.length;i++){var n=this.get_index(e[i++]);if(this.sorted.splice(n,1),n>=this.n)return;t.prototype.BR1A.call(this,[n]);var r=this.view.value.length;this.sorted.length>r&&t.prototype.BI0A.call(this,[r,this.p.value[this.sorted[r]]])}},i.BU1=function(e){for(var i=0;i<e.length;i++){var n=e[i++],r=e[i],o=this.n,s=this.p,u=this.sorted,a=this.get_index(n);if(-1!==a){var h=this.find(this.col(this.p.value[n]));if(a!==h){if(h>a&&h--,u.splice(a,1),u.splice(h,0,n),a>=o&&h>=o);else if(a>=o&&h<o)t.prototype.BR1A.call(this,[o-1]),t.prototype.BI0A.call(this,[h,s.value[u[h]]]);else if(a<o&&h>=o)t.prototype.BR1A.call(this,[a]),t.prototype.BI0A.call(this,[o-1,s.value[u[o-1]]]);else if(a<o&&h<o)for(var l=a<h?h:a,v=a<h?a:h;v<=l;v++)t.prototype.BU1.call(this,[""+v,s.value[u[v]]])}else t.prototype.BU1.call(this,[a,r])}else this.BI0([n,r])}},i.BI0=function(e){for(var i=0;i<e.length;i++){var n=e[i++],r=e[i],o=this.find(this.col(this.p.value[n]));if(this.sorted.splice(o,0,n),o>=this.n)return;this.view.value.length===this.n&&t.prototype.BR1A.call(this,[this.n-1]),t.prototype.BI0A.call(this,[o,r])}},i.BR2=function(t){for(var e=0;e<t.length;e++){var i=t[e++],n=i[0],r=i[1],o=i.slice(2),s=t[e];if(r===this.col_name)this.U1(changes,n,this.p.value[n]);else{var u=this.get_index(n);u<this.n&&this.view.BR2([[""+u,r].concat(o),s])}}},i.BU2=function(t){for(var e=0;e<t.length;e++){var i=t[e++],n=i[0],r=i[1],o=i.slice(2),s=t[e];if(r===this.col_name)this.BU1([n,this.p.value[n]]);else{var u=this.get_index(n);u<this.n&&this.view.BU2([[""+u,r].concat(o),s])}}},i.BI2=function(t){for(var e=0;e<t.length;e++){var i=t[e++],n=i[0],r=i.slice(1),o=t[e++],s=t[e];if(this.has(n)){var u=this.get_index(n);u>=this.n||this.view.BI2([[""+u].concat(r),o,s])}else this.BI0([n,this.p.value[n]])}},i.get_index=function(t){return this.sorted.indexOf(t)},i.has=function(t){return!!~this.get_index(t)},e}(m);j.prototype.find=function(t,e,i){for(void 0===e&&(e=0),void 0===i&&(i=this.sorted.length);e<i;){var n=e+i>>>1;this.col(this.p.value[this.sorted[n]])<t?i=n:e=n+1}return e};var E=/*#__PURE__*/function(t){function e(e,i,n){return void 0===n&&(n=Infinity),t.call(this,e,function(t){return t[i]},i,n)||this}return o(e,t),e}(j),L=/*#__PURE__*/function(t){function e(e,i){return void 0===i&&(i=Infinity),t.call(this,e,function(t){return t},f,i)||this}return o(e,t),e}(j),O=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).p=e,n.n=i,n.XU0(n.p.value),n}o(e,t);var i=e.prototype;return i.XR0=function(){this.XU0(this.p.value)},i.BU1=function(t){t[0]<this.last&&this.XU0(this.p.value)},i.BI0=function(t){(t[0]<this.last||this.view.value.length<this.n)&&this.XU0(this.p.value)},i.BR1=function(t){(t[0]<this.last||this.view.value.length<this.n)&&this.XU0(this.p.value)},i.XU0=function(t){if(this.view.value=[],this.index=[],"object"==typeof t)if(v(t))for(var e=-1;e<t.length&&(void 0===t[++e]||(this.view.value.push(t[e]),this.index.push(e),this.view.value.length!==this.n)););else for(var i in t)if(void 0!==t[i]&&(this.view.value.push(t[i]),this.index.push(i),this.view.value.length===this.n))break;this.last=this.index.at(-1),this.view.XU0(this.view.value)},e}(m),A=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).p=e,n.fn=i,n.XU0(n.p.value),n}o(e,t);var i=e.prototype;return i.XU0=function(t){var e=this.fn(t,this.view.value);e!==this.view.value&&this.view.XU0(this.view.value=e)},i.XR0=function(){this.XU0(this.p.value)},i.BR1=function(){this.XU0(this.p.value)},i.BU1=function(){this.XU0(this.p.value)},i.BI0=function(){this.XU0(this.p.value)},i.BR2=function(){this.XU0(this.p.value)},i.BU2=function(){this.XU0(this.p.value)},i.BI2=function(){this.XU0(this.p.value)},e}(m),P=/*#__PURE__*/function(t){function e(e,i,n){var r;return void 0===n&&(n=1e3),(r=t.call(this)||this).calc=function(){delete r.pending;var e=r.fn(r.p.value,r.view.value);if(e!==r.view.value){var i=[];t.prototype.U0.call(r,{value:e},i),r.view.bulk(i)}},r.p=e,r.fn=i,r.ms=n,r.bulk(),r}return o(e,t),e.prototype.bulk=function(){this.pending||(this.pending=setTimeout(this.calc,this.ms))},e}(m),S=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.process=function(){throw new Error("not implemented, process:",this.name)},i.loop=function(t,e,i){for(var n=[],r=[],o=[],s=0;s<t.length;s+=e){var u,a=i?t[s][0]:t[s],h=null==(u=this.view.value)?void 0:u[a],l=this.process(this.p.value[a],a,h),v=void 0!==h,c=void 0!==l;v&&c?(n.push(a,l),this.view.value[a]=l):!v&&c?(r.push(a,l),this.view.value[a]=l):v&&!c&&(o.push(a,h),delete this.view.value[a])}this.view.BU1(n),this.view.BI0(r),this.view.BR1(o)},i.XU0=function(t){if("object"!=typeof t)return this.view.XU0(this.view.value=void 0);var e=v(t)?[]:{};for(var i in t){var n,r=this.process(t[i],i,null==(n=this.view.value)?void 0:n[i]);void 0!==r&&(e[i]=r)}this.view.XU0(this.view.value=e)},i.BU1=function(t){this.loop(t,2,!1)},i.BU2=function(t){this.loop(t,2,!0)},i.BI0=function(t){this.loop(t,2,!1)},i.BI2=function(t){this.loop(t,3,!0)},i.BR2=function(t){this.loop(t,2,!0)},i.XR0=function(){t.prototype.XR0.call(this)},i.BR1=function(t){for(var e=[],i=0;i<t.length;i++){var n,r=t[i++],o=null==(n=this.view.value)?void 0:n[r];void 0!==o&&(delete this.view.value[r],e.push(r,o))}this.view.BR1(e)},e}(m),T=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).p=e,n.n=0,n.all=0,n.fn=i,n.XU0(n.p.value),n}return o(e,t),e.prototype.process=function(t,e,i){return this.fn(t,e,i)?t:void 0},e}(S);function N(t,e){for(var i=t.concat([]);i.length;){var n;e=null==(n=e)?void 0:n[i.shift()]}return e}function M(t,e){return"object"!=typeof e?t===e:Object.entries(e).every(function(e){return M(null==t?void 0:t[e[0]],e[1])})}var W=/*#__PURE__*/function(t){function e(e,i){return t.call(this,e,function(t){return M(t,i)})||this}return o(e,t),e}(T),G=/*#__PURE__*/function(t){function e(e,i,n){return t.call(this,e,void 0===n?function(t){return!!t[i]}:function(t){return t[i]===n})||this}return o(e,t),e}(T),F=/*#__PURE__*/function(t){function e(e,i,n){var r=[].concat(i);return t.call(this,e,void 0===n?function(t){return!!N(r,t)}:function(t){return N(r,t)===n})||this}return o(e,t),e}(T),z=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).p=e,n.fn=i,n.XU0(n.p.value),n}return o(e,t),e.prototype.process=function(t,e,i){return this.fn(t,e,i)},e}(S),V=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).p=e,n.fn=i,n.XU0(n.p.value),n}o(e,t);var i=e.prototype;return i.XR0=function(){this.mapping=void 0,this.view.XU0(this.view.value={})},i.XU0=function(t){var i=this;this.mapping=v(t)?new e.ArrayMapping:new e.ObjectMapping;var n={};l(t,function(t,e){var r=i.fn(e);i.mapping.update(t,r),null!=n[r]||(n[r]={}),n[r][t]=e}),this.view.XU0(this.view.value=n)},i.BR1=function(t){for(var e=[],i=[],n=0;n<t.length;n++){var r=t[n++],o=this.mapping.get(r);if(void 0===o)throw new Error("unexpected group r1: "+r+" "+typeof r);this.mapping.remove(r);var s=this.view.value[o][r];void 0!==s&&(delete this.view.value[o][r],i.push([o,r],s),K(this.view.value[o])&&(e.push(o,this.view.value[o]),delete this.view.value[o]))}this.view.BR1(e),this.view.BR2(i)},i.BU1=function(t){for(var e=[],i=[],n=[],r=[],o=[],s=0;s<t.length;s++){var u=t[s++],a=t[s],h=this.mapping.get(u),l=this.fn(a);if(h===l)i.push([l,u],this.view.value[l][u]=a);else{var v;if(void 0!==h){var c=this.view.value[h][u];delete this.view.value[h][u],e.push([h,u],c),o.push(h)}null!=(v=this.view.value)[l]||(v[l]={}),r.push([l],this.view.value[l][u]=a,u),this.mapping.update(u,l)}}for(var f=0,p=o;f<p.length;f++){var d=p[f];K(this.view.value[d])&&(n.push(d,this.view.value[d]),delete this.view.value[d])}n.length&&this.view.BR1(n),e.length&&this.view.BR2(e),i.length&&this.view.BU2(i),r.length&&this.view.BI2(r)},i.BI0=function(t){for(var e=[],i=0;i<t.length;i++){var n,r=t[i++],o=t[i],s=this.fn(o);null!=(n=this.view.value)[s]||(n[s]={}),e.push([s],this.view.value[s][r]=o,r),this.mapping.insert(r,s)}e.length&&this.view.BI2(e)},i.BR2=function(){},i.BU2=function(){},i.BI2=function(){},e}(g);V.ArrayMapping=/*#__PURE__*/function(){function t(){this.map=[]}var e=t.prototype;return e.insert=function(t,e){this.map.splice(t,0,e)},e.update=function(t,e){this.map[t]=e},e.remove=function(t){this.map.splice(t,1)},e.get=function(t){return this.map[t]},t}(),V.ObjectMapping=/*#__PURE__*/function(){function t(){this.map=new Map}var e=t.prototype;return e.insert=function(t,e){this.map.set(t,e)},e.update=function(t,e){this.map.set(t,e)},e.remove=function(t){this.map.delete(t)},e.get=function(t){return this.map.get(t)},t}();var D=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).p=e,n.fn=i,n.XU0(n.p.value),n}o(e,t);var i=e.prototype;return i.XR0=function(){this.mapping={},this.view.XU0(this.view.value={})},i.XU0=function(t){var e=this,i={};this.mapping={},l(t,function(t,n){var r,o;void 0!==n&&(e.mapping[t]=null!=(o=i[r=e.fn(n)])?o:i[r]={value:0}).value++}),this.view.XU0(this.view.value=i)},i.check=function(t){},i.BR1=function(t){for(var e=this.mapping,i=0;i<t.length;i++){var n=t[i++],r=e[n];r&&(r.value--,e[n]=void 0)}this.view.XU0(this.view.value)},i.BU1=function(t){for(var e=this.mapping,i=this.view,n=this.fn,r=0;r<t.length;r++){var o,s,u,a=t[r++],h=e[a],l=null!=(u=(o=i.value)[s=n(t[r])])?u:o[s]={value:0};h!==l&&(e[a]=l,h&&h.value--,l.value++)}this.view.XU0(this.view.value)},i.BI0=function(t){for(var e=this.mapping,i=this.view,n=this.fn,r=0;r<t.length;r++){var o,s,u,a=t[r++],h=t[r];void 0!==h&&(e[a]=null!=(u=(o=i.value)[s=n(h)])?u:o[s]={value:0}).value++}this.view.XU0(this.view.value)},i.BR2=function(){},i.BU2=function(){},i.BI2=function(){},e}(m),Y=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).p=e,n.view.value=0,n.XU0(e.value),n}o(e,t);var i=e.prototype;return i.XR0=function(){this.view.XU0(this.view.value=0)},i.XU0=function(t){var e=this;this.view.value=0,v(t)?this.view.XU0(this.view.value=t.length):(l(t,function(){return e.view.value++}),this.view.XU0(this.view.value))},i.BR1=function(t){this.view.XU0(this.view.value-=t.length/2)},i.BU1=function(t){},i.BI0=function(t){this.view.XU0(this.view.value+=t.length/2)},i.BR2=function(){},i.BU2=function(){},i.BI2=function(){},e}(m),$=/*#__PURE__*/function(t){function e(e){var i,n=[].slice.call(arguments,1);(i=t.call(this)||this).vp=n[0],i.p=e,i.sources=new Map([[e,{one:1,off:-2}]]),i.all=1;for(var o,s=r(n);!(o=s()).done;){var u=o.value,a=1<<i.sources.size;u.connect(i),i.sources.set(u[w.view],{one:a,off:~a}),i.all|=a}if("object"!=typeof e.value)return t.prototype.XU0.call(i),function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i);var h=v(i.p.value)?[]:{};return i.filters=v(i.p.value)?[]:{},l(e.value,function(t,e){for(var n,o=r(i.sources);!(n=o()).done;){var s=n.value;t in s[0].value&&(i.filters[t]|=s[1].one)}i.filters[t]===i.all&&(h[t]=e)}),i.view.XU0(i.view.value=h),i}o(e,t);var i=e.prototype;return i.XR0=function(t,e){var i=this,n=this.sources.get(e).off;l(this.filters,function(t){return i.filters[t]&=n}),this.view.XU0(this.view.value=v(this.view.value)?[]:{})},i.XU0=function(e,i){var n,r=this,o=this.sources.get(i),s=o.one,u=o.off;if(null!=(n=this.view).value||(n.value=v(this.p.value)?[]:{}),"object"!=typeof e)return t.prototype.XU0.call(this,C);null!=this.filters||(this.filters=v(this.p.value)?[]:{});var a=v(this.p.value)?[]:{};l(this.filters,function(t,e){return r.filters[t]=e&u}),l(e,function(t){(r.filters[t]|=s)===r.all&&(a[t]=r.p.value[t])}),this.view.XU0(this.view.value=a)},i.BR1=function(t,e){var i,n=this.sources.get(e).off,r=[],o=this.all&n;null!=(i=this.view).value||(i.value=v(this.p.value)?[]:{});for(var s=0;s<t.length;s+=2){var u=t[s];(this.filters[u]&n)===o&&(r.push(u,this.view.value[u]),this.view.value[u]=void 0)}this.view.BR1(r)},i.BU1=function(t){for(var e=this.all,i=this.filters,n=[],r=0;r<t.length;r++){var o=t[r++];if(i[o]===e){var s=this.p.value[o];if(s===this.view.value[o])continue;this.view.value[o]=s,n.push(o,s)}}this.view.BU1(n)},i.BI0=function(t,e){for(var i,n,r=this.all,o=this.filters,s=this.sources.get(e).one,u=null!=(n=(i=this.view).value)?n:i.value=v(this.p.value)?[]:{},a=[],h=0;h<t.length;h++){var l=t[h++];(o[l]|=s)===r&&a.push(l,u[l]=this.p.value[l])}this.view.BI0(a)},i.R2=function(){},i.U2=function(){},i.I2=function(){},e}(m),H={filter:function(t,e){return"function"==typeof t?T:"string"==typeof t?G:v(t)?F:t.constructor===Object?W:"unexpected filter args"},between:function(){return I},to:function(){return A},debounce:function(){return P},map:function(){return z},length:function(t){return"function"==typeof t?D:Y},intersect:function(){return $},group:function(){return V},za:function(t,e){return"string"==typeof t?E:"number"==typeof t?L:0},top:function(){return L},limit:function(){return O}};function q(t,e,i){if(v(e)){var n=new X(t,e);return t.sinks.add(new WeakRef(n)),e}if("object"==typeof e&&"string"==typeof i){var r=new R(t,e,i);return t.sinks.add(new WeakRef(r)),e}if("object"==typeof e&&"function"==typeof i){var o=new FunctionSink(t,e,i);return t.sinks.add(new WeakRef(o)),e}return t.sinks.add(new WeakRef(e)),e}var J=function(t){return function(e,i,n,r){for(void 0===n&&(n=0),void 0===r&&(r=e.length);n<r;){var o=n+r>>>1;t(e[o])<i?n=o+1:r=o}return n}};function K(t){for(var e in t)return!1;return!0}var Q=Symbol("Node"),Z=Object.keys,tt=/*#__PURE__*/function(){function t(t,e){this.parent=t,this.node=e,this.p=e.data[d],e.data.connect(this),this.XU0(this.p.value)}var e=t.prototype;return e.create_node=function(t){var e=this.node.generate(t,t===Q?this.node.data:this.node.data[t]);if(v(this.nodes)){var i=e.create(this.parent,this.nodes[t+1]);this.nodes.splice(t,0,i)}else this.nodes[t]=e.create(this.parent)},e.remove_node=function(t){v(this.nodes)?this.nodes.pop().remove():(this.nodes[t].remove(),delete this.nodes[t])},e.XR0=function(){for(var t in this.nodes)this.remove_node(t)},e.XU0=function(t){var e;if(this.parent.parentNode){var i=null!=(e=this.nodes)?e:{};if(void 0!==t)if("object"==typeof t){for(var n in null!=this.nodes||(this.nodes=v(t)?[]:{}),t)i[n]||this.create_node(n);for(var r in i)r in t||this.remove_node(r)}else{for(var o in this.nodes={},i)this.remove_node(o);this.create_node(Q)}else for(var s in this.nodes={},i)this.remove_node(s)}},e.BR1=function(t){for(var e=0;e<t.length;e++)this.remove_node(t[e++])},e.BU1=function(t){for(var e=0;e<t.length;e++){var i=t[e++];this.nodes[i]||this.create_node(i)}},e.BI0=function(t){for(var e=0;e<t.length;e++){var i=t[e++];this.create_node(i)}},e.BR2=function(t){},e.BU2=function(t){for(var e=0;e<t.length;e++){var i=t[e++][0];this.nodes[i]||this.create_node(i)}},e.BI2=function(t){for(var e=0;e<t.length;e+=3){var i=t[e][0];this.nodes[i]||this.create_node(i)}},t}(),et=function(){},it=/*#__PURE__*/function(t){function e(e,i,n){var r;return void 0===n&&(n=[]),(r=t.call(this)||this).ns=i,r.tag=e.replaceAll("_","-"),r.children=n,r}o(e,t),e.render=function(t,e){for(var i,n=r(e.children);!(i=n()).done;){var o=i.value;o.data?t.sink=new tt(t,o):o.create(t)}return t},e.add=function(t){for(var e,i=function(){var i=e.value;if("string"==typeof i||"number"==typeof i||!0===i)t.static=[i];else if(i instanceof vt){var n=i[Q];n.static?l(n.static,function(e,i){return t.children.push(n.generate(e,i))}):t.children.push(n.fn&&!n.hasdata?n.generate():i[Q])}else if(void 0===i||!1===i)t.static=[];else if(i[d])t.data=i;else if("function"==typeof i){var r=t.fn;t.fn=r?function(t){var e=[].slice.call(arguments,1);return i.apply(void 0,[r.apply(void 0,[t].concat(e))].concat(e))}:i}else{if("object"!=typeof i)throw new Error("unexpted arg",i);t.static=i}},n=r([].slice.call(arguments,1));!(e=n()).done;)i();return new vt(t)};var i=e.prototype;return i.create=function(t,i){var n=this.ns?document.createElementNS("http://www.w3.org/2000/svg",this.tag):document.createElement(this.tag);return i?t.insertBefore(n,i):t.append(n),e.render(n,this)},i.generate=function(t,i){var n=new e(this.tag,this.ns,this.children.concat([])),r=this.fn?this.fn(new vt(n),i,t):i;return r instanceof vt?n=r[Q]:at.add(n,r),n},n(e,[{key:"new",get:function(){var t=new e(this.tag,this.ns,this.children.concat([]));return t.static=this.static,t.data=this.data,t.fn=this.fn,t}},{key:"hasdata",get:function(){return void 0!==this.data||void 0!==this.static}}])}(et),nt=/*#__PURE__*/function(t){function e(e,i){var n;return(n=t.call(this)||this).name=e,n.value=i,n}return o(e,t),e.add=function(t,e,i){var n,r=this;return 2==arguments.length&&(i=!0),"object"==typeof e?(n=t.children).push.apply(n,Z(e).map(function(t){return new r(t,e[t])})):t.children.push(new this(e,i)),new vt(t)},e.prototype.create=function(t){var e,i;this.parent=t,null!=(e=this.value)&&e[d]?(null!=t.nrefs||(t.nrefs={}),t.nrefs[this.name]=this.value.connect(this,"set")):null!=(i=this.name)&&i[d]?(null!=t.arefs||(t.arefs=[]),t.arefs.push(this.name.connect(this,"set"))):this.set=this.value},n(e,[{key:"set",set:function(t){!1===t||void 0===t?this.remove():this.add(t)}}])}(et),rt=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.add=function(t){this.parent.setAttribute(this.name,t)},i.remove=function(){this.parent.removeAttribute(this.name)},e}(nt),ot=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.add=function(){this.parent.classList.add(this.name)},i.remove=function(){this.parent.classList.remove(this.name)},e}(nt),st=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.add=function(){this.parent.id=this.name},i.remove=function(){this.parent.removeAttribute("id")},e}(nt),ut=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.add=function(t){this.parent.style.setProperty(this.name,t)},i.remove=function(){this.parent.style.removeProperty(this.name)},e}(nt),at=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.create=function(e){e.appendChild(this.dom=document.createTextNode("")),t.prototype.create.call(this,e)},i.add=function(){this.dom.textContent=this.name},i.remove=function(){this.dom.textContent=""},e}(nt),ht=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(t){t.addEventListener(this.name.toLowerCase(),this.value)},e}(nt),lt={attr:rt,class:ot,on:ht,style:ut,id:st,text:at,nodes:it},vt=/*#__PURE__*/function(){function t(t,e){return this.node=t,this.prop=e,new Proxy(c,this)}var e=t.prototype;return e.set=function(){throw"cannot set properties"},e.deleteProperty=function(){throw"cannot delete properties"},e.get=function(e,i){var n=this.node;return i===Q?n:"symbol"==typeof i?void 0:i in lt?new t(n,i):i.startsWith("#")?st.add(n.new,i.slice(1),!0):i.startsWith(".")?ot.add(n.new,i.slice(1),!0):i.includes("=")?rt.add.apply(rt,[n.new].concat(i.split("="))):ot.add(n.new,i.replaceAll("_","-"),!0)},e.apply=function(t,e,i){var n,r;return(n=lt[null!=(r=this.prop)?r:"nodes"]).add.apply(n,[this.node.new].concat(i))},e.getPrototypeOf=function(e){return t.prototype},t}(),ct=new Proxy({},{get:function(t,e){return new vt(new it(e))}}),ft=new Proxy({},{get:function(t,e){return new vt(new it(e,!0))}});t.$=p,t.HTML=ct,t.SVG=ft,t.render=function(t,e){return it.render(t,e[Q])},t.value=f});
//# sourceMappingURL=data.umd.js.map
