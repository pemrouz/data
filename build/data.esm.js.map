{"version":3,"file":"data.esm.js","sources":["../utils.js","../data.js","../render.js"],"sourcesContent":["// @ts-nocheck\nexport function iter(o, fn) {\n    if (isArray(o)) {\n        for (let i = 0; i < o.length; i++)\n            fn(i, o[i]);\n    }\n    else {\n        for (const i in o)\n            fn(i, o[i]);\n    }\n}\nexport const { isArray } = Array;\nexport const identity = d => d;\nexport const noop = () => { };\nexport const U = undefined;\n","// @ts-nocheck\nexport const value = Symbol('value');\nexport const reactive = Symbol.for('reactive');\nexport const $ = (v) => new ViewProxy(View.value(v)); // as unknown as Data<any>\nexport default $;\nexport const view = Symbol('view');\nimport { iter, isArray, noop } from \"./utils.js\";\nconst isObject = v => v.constructor === Object;\nconst Symbols = { value, view };\nconst str = JSON.stringify;\n$.random = (o) => crypto.randomUUID();\nconst sclone = d => d === undefined ? undefined\n    : d[view] ? d[view].value\n        : structuredClone(d);\nclass Value {\n    constructor() {\n        this.view = new View(this);\n        // this.links = new Map;\n    }\n    update(value, key) {\n        if (value instanceof ViewProxy)\n            throw new Error('cannot set value to another data, use a linked value instead');\n        key.length === 0 ? this.XU0(value) // this.XU0(value)\n            : key.length === 1 ? this.BU1([key[0], value])\n                : this.BU2([key, value]);\n    }\n    insert(value, key, at) {\n        if (value instanceof ViewProxy)\n            throw new Error('cannot set value to another data, use a linked value instead');\n        at = at === undefined ? at : `${at}`;\n        key.length === 0 ? this.BI0([at, value])\n            : this.BI2([key, value, at]);\n    }\n    remove(key) {\n        key.length === 0 ? this.XR0()\n            : key.length === 1 ? this.BR1([key[0]])\n                : this.BR2([key]);\n    }\n    XR0() {\n        if (this.view.value === undefined)\n            return false;\n        const value = this.view.value;\n        this.view.value = undefined;\n        this.view.XR0(value);\n    }\n    BR1A(R1) {\n        const NR1 = [];\n        for (let i = 0; i < R1.length; i++) {\n            const name = R1[i];\n            const value = this.view.value?.[name];\n            this.view.value.splice(name, 1);\n            NR1.push(name);\n            NR1.push(value);\n        }\n        this.view.BR1(NR1);\n    }\n    BR1(R1) {\n        if (isArray(this.view.value))\n            return this.BR1A(R1);\n        const NR1 = [];\n        for (let i = 0; i < R1.length; i++) {\n            const name = R1[i];\n            const value = this.view.value?.[name];\n            if (value === undefined)\n                continue; // return false\n            delete this.view.value[name];\n            NR1.push(name);\n            NR1.push(value);\n        }\n        this.view.BR1(NR1);\n    }\n    BR2(R2) {\n        const NR2 = [];\n        loop1: for (let i = 0; i < R2.length; i++) {\n            const key = R2[i];\n            const [last, ...path] = key.slice().reverse();\n            let vo = this.view.value;\n            if (typeof vo !== 'object')\n                return;\n            while (path.length) {\n                const n = path.pop();\n                if (typeof vo !== 'object')\n                    continue loop1;\n                vo = vo[n];\n            }\n            if (vo[last] === undefined)\n                continue loop1;\n            const value = vo[last];\n            if (isArray(vo)) {\n                vo.splice(last, 1);\n            }\n            else {\n                delete vo[last];\n            }\n            NR2.push(key, value);\n        }\n        this.view.BR2(NR2);\n    }\n    XU0(value) {\n        if (this.view.value === value)\n            return;\n        this.view.value = value; // this.link(value)\n        this.view.XU0();\n    }\n    BU1(U1) {\n        const NU1 = [];\n        const NI0 = [];\n        if (typeof this.view.value !== 'object')\n            this.view.value = {};\n        for (let i = 0; i < U1.length; i++) {\n            const name = U1[i++];\n            const value = U1[i];\n            if (this.view.value?.[name] === value)\n                continue;\n            this.view.value?.[name] === undefined\n                ? NI0.push(name, value)\n                : NU1.push(name, value);\n            this.view.value[name] = value;\n        }\n        // console.log('R :>> ', { NU1, NI0 });\n        this.view.BU1(NU1);\n        this.view.BI0(NI0);\n    }\n    BU2(U2) {\n        if (typeof this.view.value !== 'object')\n            this.view.value = {};\n        for (let i = 0; i < U2.length; i++) {\n            const key = U2[i++];\n            const value = U2[i];\n            const [last, ...path] = key.slice().reverse();\n            let vo = this.view.value;\n            while (path.length) {\n                const n = path.pop();\n                vo = typeof vo[n] === 'object' ? vo[n] : (vo[n] = {});\n            }\n            if (vo[last] === value)\n                continue;\n            vo[last] = value; // this.link(key, value)\n        }\n        this.view.BU2(U2);\n    }\n    BI0(I0) {\n        if (isArray(this.view.value))\n            return this.BI0A(I0);\n        if (typeof this.view.value !== 'object')\n            this.view.value = {};\n        for (let i = 0; i < I0.length; i++) {\n            const at = I0[i++] ??= '' + $.random(this.view.value);\n            const value = I0[i];\n            if (this.view.value?.[at] === value)\n                continue;\n            this.view.value[at] = value; // link\n        }\n        this.view.BI0(I0);\n    }\n    BI0A(I0) {\n        for (let i = 0; i < I0.length; i += 2) {\n            const at = I0[i];\n            const value = I0[i + 1];\n            if (at === undefined)\n                I0[i] = '' + (this.view.value.push(value) - 1);\n            else\n                this.view.value.splice(at, 0, value);\n        }\n        this.view.BI0(I0);\n    }\n    BI2(I2) {\n        if (typeof this.view.value !== 'object')\n            this.view.value = {};\n        for (let i = 0; i < I2.length; i++) {\n            const key = I2[i++];\n            const value = I2[i++];\n            const path = key.slice().reverse();\n            let vo = this.view.value;\n            while (path.length) {\n                const n = path.pop();\n                vo = typeof vo[n] === 'object' ? vo[n] : (vo[n] = {});\n            }\n            if (isArray(vo)) {\n                if (I2[i] === undefined)\n                    I2[i] ??= '' + (vo.push(value) - 1);\n                else\n                    vo.splice(I2[i], 0, value); // vo[at] = this.link([at], value)\n            }\n            else {\n                const at = I2[i] ??= '' + $.random(vo);\n                vo[at] = value; // this.link(nkey, value)\n            }\n        }\n        this.view.BI2(I2);\n    }\n}\nclass Operator extends Value {\n}\nclass View {\n    constructor(res) {\n        this.res = res;\n        this.key = [];\n        this.sinks = new Set;\n        this.views = new Map;\n    }\n    static child(p, name) {\n        const view = new View(p.res);\n        view.p = p;\n        view.key = [...p.key, name];\n        view.name = name;\n        view.XU0(p.value?.[name]);\n        return view;\n    }\n    static value(value) {\n        if (value instanceof ViewProxy) {\n            return new LinkedView(value);\n        }\n        else {\n            const res = new Value;\n            res.XU0(value);\n            return res.view;\n        }\n    }\n    XR0(value) {\n        if (this.p)\n            this.value = undefined;\n        this.each((name, child) => {\n            if (child.value !== value?.[name] || child.value !== undefined)\n                child.XR0(value?.[name]);\n        });\n        this.sink(sink => sink.XR0(value, this));\n    }\n    BR1(R1) {\n        if (!R1.length)\n            return;\n        if (!isArray(this.value)) {\n            for (let i = 0; i < R1.length; i += 2)\n                this.get_named(R1[i])?.XR0(R1[i + 1]);\n        }\n        else if (this.views.size) {\n            let offset = Infinity;\n            for (let i = 0; i < R1.length; i += 2) {\n                if (R1[i] < offset)\n                    offset = R1[i];\n                if (!offset)\n                    break;\n            }\n            this.V1(offset);\n        }\n        // this.sink(sink => sink.BR1(R1, this))\n        for (const x of this.sinks) {\n            const sink = x.deref();\n            if (!sink) {\n                this.sinks.delete(sink);\n                continue;\n            }\n            sink.BR1(R1, this);\n        }\n    }\n    BR2(R2) {\n        for (let i = 0; i < R2.length; i++) {\n            const [name, ...rest] = R2[i++];\n            const value = R2[i];\n            rest.length === 1\n                ? this.get_named(name)?.BR1([rest[0], value])\n                : this.get_named(name)?.BR2([rest, value]);\n        }\n        this.sink(sink => sink.BR2(R2, this));\n    }\n    XU0() {\n        if (this.p)\n            this.value = this.p.value?.[this.name];\n        this.each((name, child) => {\n            if (this.value?.[name] !== undefined)\n                child.XU0();\n            else {\n                if (child.value !== undefined)\n                    child.XR0(child.value);\n            }\n        });\n        this.sink(sink => sink.XU0(this.value, this));\n    }\n    BU1(U1) {\n        if (!U1.length)\n            return;\n        if (this.p)\n            this.value = this.p.value?.[this.name];\n        for (let i = 0; i < U1.length; i++)\n            this.get_named(U1[i++])?.XU0();\n        this.sink(sink => sink.BU1(U1, this));\n    }\n    BU2(U2) {\n        if (this.p)\n            this.value = this.p.value?.[this.name];\n        for (let i = 0; i < U2.length; i++) {\n            const [name, ...rest] = U2[i++];\n            const value = U2[i];\n            rest.length === 1\n                ? this.get_named(name)?.BU1([rest[0], value])\n                : this.get_named(name)?.BU2([rest, value]);\n        }\n        this.sink(sink => sink.BU2(U2, this));\n    }\n    BI0(I0) {\n        if (!I0.length)\n            return;\n        if (this.p)\n            this.value = this.p.value?.[this.name];\n        if (isArray(this.value))\n            return this.BI0A(I0);\n        for (let i = 0; i < I0.length; i++)\n            this.get_named(I0[i++])?.XU0();\n        this.sink(sink => sink.BI0(I0, this));\n    }\n    BI0A(I0) {\n        if (this.views.size) {\n            let offset = Infinity;\n            for (let i = 0; i < I0.length; i += 2) {\n                if (I0[i] < offset)\n                    offset = I0[i];\n            }\n            this.V1(offset);\n        }\n        this.sink(sink => sink.BI0(I0, this));\n    }\n    BI2(I2) {\n        if (this.p)\n            this.value = this.p.value?.[this.name];\n        // console.log({ I2 })\n        for (let i = 0; i < I2.length;) {\n            const [name, ...rest] = I2[i++];\n            const value = I2[i++];\n            const at = I2[i++];\n            // console.log({ name, rest, value, at })\n            rest.length\n                ? this.get_named(name)?.BI2([rest, value, at])\n                : this.get_named(name)?.BI0([at, value]);\n        }\n        this.sink(sink => sink.BI2(I2, this));\n    }\n    V1(offset) {\n        for (let i = offset; i < this.value.length + 1; i++) {\n            const child = this.get_named(`${i}`);\n            if (child && child.value !== this.value[i])\n                child.XU0();\n        }\n    }\n    some_sink(fn) {\n        let n;\n        for (const x of this.sinks) {\n            const sink = x.deref?.();\n            if (!sink) { /* console.log('delete') */\n                this.sinks.delete(sink);\n                continue;\n            }\n            if (n = fn(x))\n                return n;\n        }\n    }\n    sink(fn) {\n        for (const x of this.sinks) {\n            const sink = x.deref?.();\n            if (!sink) { /* console.log('delete') */\n                this.sinks.delete(sink);\n                continue;\n            }\n            fn(sink);\n        }\n    }\n    each(fn) {\n        for (const [name, ref] of this.views) {\n            const res = ref.deref?.();\n            if (!res) {\n                this.views.delete(name);\n                continue;\n            }\n            fn(name, res);\n        }\n    }\n    get_or_create_named(name) {\n        return this.views.get(name)?.deref?.() ?? create(this.views, name, View.child(this, name));\n    }\n    get_named(name) {\n        const res = this.views.get(name)?.deref?.();\n        if (!res)\n            this.views.delete(name);\n        return res;\n    }\n    disconnect(sink) {\n        for (const x of this.sinks) {\n            const s = x.deref?.();\n            if (s === sink) {\n                this.sinks.delete(x);\n                break;\n            }\n            if (!s) {\n                this.sinks.delete(x);\n                continue;\n            }\n        }\n    }\n    connect(sink) {\n        this.sinks.add(new WeakRef(sink));\n    }\n}\nexport class Sink {\n}\nclass LinkedView extends View {\n    constructor(p) {\n        super();\n        this.src = p[Symbols.view];\n        this.update(this.src);\n    }\n    update(value, key = []) {\n        if (key.length) {\n            return this.src.res.update(value, key);\n        }\n        if (value instanceof ViewProxy)\n            value = value[Symbols.view];\n        if (!(value instanceof View))\n            throw new Error('cannot set linked value to non-reactive source');\n        this.src.disconnect(this);\n        this.src = value;\n        this.src.connect(this);\n        this.XU0(this.src.value);\n    }\n    insert(...args) { return this.src.res.insert(...args); }\n    remove(...args) { return this.src.res.remove(...args); }\n    XU0(U0) { this.sink(sink => sink.XU0(U0, this)); }\n    BU1(U1) { this.sink(sink => sink.BU1(U1, this)); }\n    BU2(U2) { this.sink(sink => sink.BU2(U2, this)); }\n    XR0(R0) { this.sink(sink => sink.XR0(R0, this)); }\n    BR1(R1) { this.sink(sink => sink.BR1(R1, this)); }\n    BR2(R2) { this.sink(sink => sink.BR2(R2, this)); }\n    BI0(I0) { this.sink(sink => sink.BI0(I0, this)); }\n    BI2(I2) { this.sink(sink => sink.BI2(I2, this)); }\n    get value() { return this.src.value; }\n    get res() { return this; }\n    set res(v) { }\n}\nfunction iter2(arr, fn) {\n    for (let i = 0; i < arr.length; i++)\n        fn(arr[i++], arr[i]);\n}\nfunction iter3(arr, fn) {\n    for (let i = 0; i < arr.length; i++)\n        fn(arr[i++], arr[i++], arr[i]);\n}\nclass ArrSink {\n    constructor(p, arr) {\n        this.p = p;\n        this.arr = arr;\n        this.update([], p.value);\n    }\n    update = (key, value) => this.arr.push({ type: 'update', key, value: sclone(value) });\n    remove = (key, value) => this.arr.push({ type: 'remove', key, value: sclone(value) });\n    insert = (key, value, at) => this.arr.push({ type: 'insert', key, value: sclone(value), at });\n    XU0(value) { this.update([], value); }\n    BU1(U1) { iter2(U1, (name, value) => this.update([name], value)); }\n    BU2(U2) { iter2(U2, (key, value) => this.update(key, value)); }\n    BI0(I0) { iter2(I0, (at, value) => this.insert([], value, at)); }\n    BI2(I0) { iter3(I0, (key, value, at) => this.insert(key, value, at)); }\n    XR0(value) { this.remove([], value); }\n    BR1(R1) { iter2(R1, (name, value) => this.remove([name], value)); }\n    BR2(R2) { iter2(R2, (key, value) => this.remove(key, value)); }\n    R0(value) { this.arr.push({ type: 'remove', key: [], value: sclone(value) }); }\n    R1(name, value) { this.arr.push({ type: 'remove', key: [name], value: sclone(value) }); }\n    R2(key, value) { this.arr.push({ type: 'remove', key, value: sclone(value) }); }\n    U0(value) { this.arr.push({ type: 'update', key: [], value: sclone(value) }); }\n    U1(name, value) { this.arr.push({ type: 'update', key: [name], value: sclone(value) }); }\n    U2(key, value) { this.arr.push({ type: 'update', key, value: sclone(value) }); }\n    I0(value, at) { this.arr.push({ type: 'insert', value: sclone(value), at }); }\n    I1(name, value, at) { this.arr.push({ type: 'insert', key: [name], value: sclone(value), at }); }\n    I2(key, value, at) { this.arr.push({ type: 'insert', key, value: sclone(value), at }); }\n}\nconst lifetimes = new WeakMap;\nclass PropSink extends Sink {\n    p;\n    obj;\n    prop;\n    constructor(p, obj, prop) {\n        super();\n        this.p = p;\n        this.obj = obj;\n        this.prop = prop;\n        this.obj[prop] = p.value;\n        const refs = lifetimes.get(obj) ?? new Set;\n        refs.add(this);\n        lifetimes.set(obj, refs);\n    }\n    XU0(value) { this.obj[this.prop] = value; }\n    XR0() { this.XU0(this.p.value); }\n    BU1() { this.XU0(this.p.value); }\n    BR1() { this.XU0(this.p.value); }\n    BI0() { this.XU0(this.p.value); }\n    BU2() { this.XU0(this.p.value); }\n    BR2() { this.XU0(this.p.value); }\n    BI2() { this.XU0(this.p.value); }\n}\nclass ViewProxy {\n    view;\n    constructor(view) {\n        this.view = view;\n        return new Proxy(noop, this);\n    }\n    deleteProperty(target, name) {\n        const { res, key } = this.view;\n        const path = name === Symbols.value ? key : [...key, '' + name];\n        res.remove(path);\n        return true;\n    }\n    set(t, name, value) {\n        const { res, key } = this.view;\n        const path = name === Symbols.value ? key : [...key, name];\n        res.update(value, path);\n        return true;\n    }\n    get(t, name) {\n        if (name === Symbol.toPrimitive)\n            return (hint) => hint\n                ? this.view.value?.toString()\n                : +this.view.value;\n        if (name === Symbol.iterator)\n            return this.iterator;\n        if (name === Symbols.reactive)\n            return true;\n        if (name === Symbols.view)\n            return this.view;\n        if (name === Symbols.value)\n            return this.view.value;\n        return new ViewProxy(this.view.get_or_create_named(name));\n    }\n    apply(t, m, args) {\n        const { p, name: type } = this.view;\n        if (!p)\n            throw new Error('cannot invoke a root value!');\n        if (type === 'connect')\n            return connect(p, ...args);\n        const Operator = Operators[type]?.(...args);\n        if (Operator) {\n            let sink = p.some_sink(sink => {\n                if (sink instanceof Operator)\n                    return sink.matches(...args);\n            });\n            if (!sink) {\n                p.sinks.add(new WeakRef(sink = new Operator(p, ...args)));\n            }\n            return new ViewProxy(sink.view);\n        }\n        const [value, at] = args;\n        if (type === 'remove')\n            return this.view.res.remove(p.key);\n        if (type === 'update')\n            return this.view.res.update(value, p.key);\n        if (type === 'insert')\n            return this.view.res.insert(value, p.key, at);\n    }\n    getPrototypeOf(targer) {\n        return ViewProxy.prototype;\n    }\n    *iterator(i = 0) {\n        while (true) {\n            yield this[i++];\n        }\n        // for (const k of Object.keys(this[view].value)) {\n        //   yield this[k]\n        // }\n    }\n}\nclass BetweenValue extends Operator {\n    matches(col, [lo, hi]) {\n        return this.col === col && this.plo === lo && this.phi === hi;\n    }\n    constructor(p, col, arg) {\n        super();\n        this.p = p;\n        this.col = col;\n        this.plo = arg[0];\n        this.phi = arg[1];\n        this.sorted = [];\n        this.find = left(d => { return this.p.value[d][col]; });\n        if (arg instanceof ViewProxy) {\n            arg.connect(this, 'extent');\n        }\n        else {\n            arg[0].connect(this, 'lo');\n            arg[1].connect(this, 'hi');\n        }\n        this.XU0(p.value);\n    }\n    set lo(v) {\n        this.extent = v > this.hi_val\n            ? [this.hi_val, v]\n            : [v, this.hi_val];\n    }\n    set hi(v) {\n        this.extent = v < this.lo_val\n            ? [v, this.lo_val]\n            : [this.lo_val, v];\n    }\n    set extent([a = -Infinity, b = Infinity]) {\n        a = +a;\n        b = +b;\n        const new_lo = a < b ? a : b; // TODO: remove\n        const new_hi = a < b ? b : a; // TODO: remove\n        if (!this.view.value)\n            return [this.lo_val, this.hi_val] = [new_lo, new_hi];\n        if (new_lo === -Infinity && new_hi === Infinity) {\n            this.hi_index = this.lo_index = undefined;\n            [this.lo_val, this.hi_val] = [new_lo, new_hi];\n            return this.view.XU0(this.view.value = this.p.value);\n        }\n        if (new_lo === new_hi) {\n            this.hi_index = this.lo_index = undefined;\n            [this.lo_val, this.hi_val] = [new_lo, new_hi];\n            return this.view.XU0(this.view.value = isArray(this.p.value) ? [] : {});\n        }\n        const I0 = [], R1 = [];\n        this.lo_index ??= this.find(this.sorted, this.lo_val);\n        this.hi_index ??= this.find(this.sorted, this.hi_val);\n        let ti, tv;\n        if (new_hi < this.hi_val) {\n            while ((tv = this.p.value[ti = this.sorted[this.hi_index - 1]]) &&\n                (tv[this.col] > new_hi)) {\n                this.hi_index--;\n                R1.push(ti, tv);\n                this.view.value[ti] = undefined;\n            }\n            if (this.lo_index > this.hi_index)\n                this.lo_index = this.hi_index;\n        }\n        if (new_lo > this.lo_val) {\n            while ((tv = this.p.value[ti = this.sorted[this.lo_index]]) &&\n                (tv[this.col] < new_lo)) {\n                this.lo_index++;\n                R1.push(ti, tv);\n                this.view.value[ti] = undefined;\n            }\n            if (this.hi_index < this.lo_index)\n                this.hi_index = this.lo_index;\n        }\n        if (new_hi > this.hi_val) {\n            while ((tv = this.p.value[ti = this.sorted[this.hi_index]]) &&\n                (tv[this.col] < new_hi)) {\n                this.hi_index++;\n                I0.push(ti, tv);\n                this.view.value[ti] = tv;\n            }\n        }\n        if (new_lo < this.lo_val) {\n            while ((tv = this.p.value[ti = this.sorted[this.lo_index - 1]]) &&\n                (tv[this.col] > new_lo)) {\n                this.lo_index--;\n                I0.push(ti, tv);\n                this.view.value[ti] = tv;\n            }\n        }\n        this.lo_val = new_lo;\n        this.hi_val = new_hi;\n        this.view.BI0(I0);\n        this.view.BR1(R1);\n    }\n    XU0(value) {\n        const { col } = this;\n        this.lo_index = undefined;\n        this.hi_index = undefined;\n        if (typeof value !== 'object')\n            return super.XU0();\n        const new_value = isArray(value) ? [] : {};\n        this.sorted = [];\n        iter(value, (i, v) => {\n            this.sorted.push('' + i);\n            if (v[col] >= this.lo_val && v[col] <= this.hi_val)\n                new_value[i] = value[i];\n        });\n        this.sorted.sort((a, b) => {\n            const va = value[a][col];\n            const vb = value[b][col];\n            return va > vb ? 1\n                : va < vb ? -1\n                    : 0;\n        });\n        super.XU0(new_value);\n    }\n}\nclass ZAValue extends Operator {\n    matches(col, n) { return this.col_name == col && this.n == n; }\n    constructor(p, col, col_name, n) {\n        super();\n        this.p = p;\n        this.n = n;\n        this.col = col;\n        this.col_name = col_name;\n        this.XU0(p.value);\n    }\n    XR0() {\n        this.sorted = [];\n        this.view.XU0(this.view.value = []);\n    }\n    XU0(value) {\n        if (typeof value !== 'object')\n            return this.XR0();\n        this.sorted = Object\n            .keys(value)\n            .sort((a, b) => {\n            const va = this.col(value[a]);\n            const vb = this.col(value[b]);\n            return va > vb ? -1\n                : va < vb ? 1\n                    : 0;\n        });\n        this.view.XU0(this.view.value = this.sorted\n            .slice(0, this.n)\n            .map(i => value[i]));\n    }\n    BR1(R1) {\n        for (let i = 0; i < R1.length; i++) {\n            const oidx = this.get_index(R1[i++]);\n            this.sorted.splice(oidx, 1);\n            if (oidx >= this.n)\n                return;\n            super.BR1A([oidx]);\n            const len = this.view.value.length;\n            if (this.sorted.length > len)\n                super.BI0A([len, this.p.value[this.sorted[len]]]);\n        }\n    }\n    BU1(U1) {\n        for (let i = 0; i < U1.length; i++) {\n            const name = U1[i++];\n            const value = U1[i];\n            const { n, p, sorted } = this;\n            let oidx = this.get_index(name);\n            if (oidx === -1) {\n                this.BI0([name, value]);\n                continue;\n            }\n            let nidx = this.find(this.col(this.p.value[name]));\n            if (oidx === nidx) {\n                super.BU1([oidx, value]);\n                continue;\n            }\n            if (nidx > oidx)\n                nidx--;\n            sorted.splice(oidx, 1);\n            sorted.splice(nidx, 0, name);\n            if (oidx >= n && nidx >= n) { }\n            else if (oidx >= n && nidx < n) {\n                super.BR1A([n - 1]);\n                super.BI0A([nidx, p.value[sorted[nidx]]]);\n            }\n            else if (oidx < n && nidx >= n) {\n                super.BR1A([oidx]);\n                super.BI0A([n - 1, p.value[sorted[n - 1]]]);\n            }\n            else if (oidx < n && nidx < n) {\n                const lo = oidx < nidx ? oidx : nidx;\n                const hi = oidx < nidx ? nidx : oidx;\n                for (let idx = lo; idx <= hi; idx++) {\n                    super.BU1(['' + idx, p.value[sorted[idx]]]);\n                }\n            }\n        }\n    }\n    BI0(I0) {\n        for (let i = 0; i < I0.length; i++) {\n            const at = I0[i++];\n            const value = I0[i];\n            const new_idx = this.find(this.col(this.p.value[at]));\n            this.sorted.splice(new_idx, 0, at);\n            if (new_idx >= this.n)\n                return;\n            if (this.view.value.length === this.n)\n                super.BR1A([this.n - 1]);\n            super.BI0A([new_idx, value]);\n        }\n    }\n    BR2(R2) {\n        for (let i = 0; i < R2.length; i++) {\n            const [name, col, ...rest] = R2[i++];\n            const value = R2[i];\n            if (col === this.col_name) {\n                this.U1(changes, name, this.p.value[name]);\n            }\n            else {\n                const oidx = this.get_index(name);\n                if (oidx < this.n)\n                    this.view.BR2([[`${oidx}`, col, ...rest], value]);\n            }\n        }\n    }\n    BU2(U2) {\n        for (let i = 0; i < U2.length; i++) {\n            const [name, col, ...rest] = U2[i++];\n            const value = U2[i];\n            if (col === this.col_name) {\n                this.BU1([name, this.p.value[name]]);\n            }\n            else {\n                const oidx = this.get_index(name);\n                if (oidx < this.n) {\n                    this.view.BU2([[`${oidx}`, col, ...rest], value]);\n                }\n            }\n        }\n    }\n    BI2(I2) {\n        for (let i = 0; i < I2.length; i++) {\n            const [name, ...rest] = I2[i++];\n            const value = I2[i++];\n            const at = I2[i];\n            if (!this.has(name)) {\n                this.BI0([name, this.p.value[name]]);\n                continue;\n            }\n            // TODO: assuming this type of assert can't change val atm\n            const nidx = this.get_index(name);\n            if (nidx >= this.n)\n                continue;\n            this.view.BI2([[`${nidx}`, ...rest], value, at]);\n        }\n    }\n    get_index(id) {\n        return this.sorted.indexOf(id);\n    }\n    has(id) { return !!~this.get_index(id); }\n}\nZAValue.prototype.find = bisect_right;\nclass ZAColumnValue extends ZAValue {\n    constructor(p, col, n = Infinity) {\n        super(p, d => d[col], col, n);\n    }\n}\nclass ZANumberValue extends ZAValue {\n    constructor(p, n = Infinity) {\n        super(p, d => d, value, n);\n    }\n}\nclass LimitValue extends Operator {\n    constructor(p, n) {\n        super();\n        this.p = p;\n        this.n = n;\n        this.XU0(this.p.value);\n    }\n    XR0() { this.XU0(this.p.value); }\n    BU1(U1) { if (U1[0] < this.last)\n        this.XU0(this.p.value); }\n    BI0(I0) { if (I0[0] < this.last || this.view.value.length < this.n)\n        this.XU0(this.p.value); }\n    BR1(R1) { if (R1[0] < this.last || this.view.value.length < this.n)\n        this.XU0(this.p.value); }\n    // BR2(){ this.XU0(this.p.value) }\n    // BU2(){ this.XU0(this.p.value) }\n    // BI2(){ this.XU0(this.p.value) }\n    XU0(value) {\n        this.view.value = [];\n        this.index = [];\n        if (typeof value === 'object') {\n            if (isArray(value)) {\n                let i = -1;\n                while (i < value.length) {\n                    if (value[++i] !== undefined) {\n                        this.view.value.push(value[i]);\n                        this.index.push(i);\n                        if (this.view.value.length === this.n)\n                            break;\n                    }\n                }\n            }\n            else {\n                for (const i in value) {\n                    if (value[i] !== undefined) {\n                        this.view.value.push(value[i]);\n                        this.index.push(i);\n                        if (this.view.value.length === this.n)\n                            break;\n                    }\n                }\n            }\n        }\n        this.last = this.index.at(-1);\n        this.view.XU0(this.view.value);\n    }\n}\n// class LimitValue extends Operator {\n//   constructor(p, n) {\n//     super()\n//     this.p = p\n//     this.n = n\n//     this.XU0(this.p.value)\n//   }\n//   XR0(){ this.XU0(this.p.value) }\n//   BU1(U1){ \n//     // console.log('U1', { index: this.index, last: this.last, U1, value: this.view.value })\n//     const NU1 = []\n//     for (let i = 0; i < U1.length; i++) {\n//       const name = +U1[i++]\n//       if (name <= this.last) {\n//         const value = U1[i]\n//         const index = find(this.index, name)\n//         this.view.value[index] = value\n//         NU1.push(index, value)\n//       }\n//     } \n//     this.view.BU1(NU1)\n//   }\n//   BI0(I0){ \n//     // console.log('I0', { index: this.index, last: this.last, I0 })\n//     // return\n//     // let last = this.index.at(-1)\n//     const NI0 = []\n//     const NR1 = []\n//     for (let i = 0; i < I0.length; i++) {\n//       const at = +I0[i++]\n//       if (at < this.last || this.view.value.length < this.n) {\n//         // console.og\n//         const value = I0[i]\n//         const index = find(this.index, at)\n//         this.view.value.splice(index, 0, value)\n//         this.index.splice(index, 0, at)\n//         NI0.push(index, value)\n//         this.last = this.index.at(-1)\n//       } else break\n//     }\n//     while (this.view.value.length > this.n) {\n//       // console.log('popping', { value: this.view.value })\n//       this.index.pop()\n//       NR1.push(this.index.length, this.view.value.pop())\n//     }\n//     this.view.BI0(NI0)\n//     this.view.BR1(NR1)\n//     // } else {\n//     //   this.XU0(this.p.value)  // TODO: optimise fast path for all combinations\n//     // }\n//   }\n//   BR1(R1){\n//     // console.log({ index: this.index, last: this.last, R1 })\n//     // return\n//     const NR1 = []\n//     const NI0 = []\n//     for (let i = 0; i < R1.length; i+=2) {\n//       const name = +R1[i]\n//       if (name <= this.last) {\n//         const index = find(this.index, name) \n//         this.index.splice(index, 1)\n//         NR1.push(index, this.view.value.splice(index, 1)[0])\n//         this.last = this.index.at(-1)\n//       } else break\n//     }\n//     if (this.view.value.length < this.n) {\n//       const value = this.p.value\n//       if (isArray(value)) {\n//         for (let i = this.last ?? 0; i < value.length; i++) {\n//           if (value[i] !== undefined) {\n//             NI0.push(this.index.length, value[i])\n//             this.view.value.push(value[i])\n//             this.index.push(i)\n//             if (this.view.value.length === this.n) break\n//           }\n//         }\n//       } else {\n//         if (this.last === undefined) {\n//           for (const i in value) {\n//             if (value[i] !== undefined) {\n//               NI0.push(this.index.length, value[i])\n//               this.view.value.push(value[i])\n//               this.index.push(+i)\n//               if (this.view.value.length === this.n) break\n//             }\n//           }\n//         } else {\n//           for (const i in value) {\n//             if (value[i] !== undefined && i > this.last) {\n//               NI0.push(this.index.length, value[i])\n//               this.view.value.push(value[i])\n//               this.index.push(+i)\n//               if (this.view.value.length === this.n) break\n//             }\n//           }\n//         }\n//       }\n//       this.last = this.index.at(-1)\n//     }\n//     this.view.BR1(NR1)\n//     this.view.BI0(NI0)\n//   }\n//   BR2(){ this.XU0(this.p.value) }\n//   BU2(){ this.XU0(this.p.value) }\n//   BI2(){ this.XU0(this.p.value) }\n//   XU0(value) {\n//     this.view.value = []\n//     this.index = []\n//     if (typeof value === 'object') {\n//       if (isArray(value)) {\n//         let i = -1 \n//         while (i < value.length) {\n//           if (value[++i] !== undefined) {\n//             this.view.value.push(value[i])\n//             this.index.push(i)\n//             if (this.view.value.length === this.n) break\n//           }\n//         }\n//       } else {\n//         for (const i in value) {\n//           if (value[i] !== undefined) {\n//             this.view.value.push(value[i])\n//             this.index.push(+i)\n//             if (this.view.value.length === this.n) break\n//           }\n//         }\n//       }\n//     }\n//     this.last = this.index.at(-1)\n//     this.view.XU0(this.view.value)\n//   }\n// }\nclass ToValue extends Operator {\n    constructor(p, fn) {\n        super();\n        this.p = p;\n        this.fn = fn;\n        this.XU0(this.p.value);\n    }\n    XU0(value) {\n        const new_value = this.fn(value, this.view.value);\n        if (new_value === this.view.value)\n            return;\n        this.view.XU0(this.view.value = new_value);\n    }\n    XR0() { this.XU0(this.p.value); }\n    BR1() { this.XU0(this.p.value); }\n    BU1() { this.XU0(this.p.value); }\n    BI0() { this.XU0(this.p.value); }\n    BR2() { this.XU0(this.p.value); }\n    BU2() { this.XU0(this.p.value); }\n    BI2() { this.XU0(this.p.value); }\n}\nclass DebounceValue extends Operator {\n    constructor(p, fn, ms = 1000) {\n        super();\n        this.p = p;\n        this.fn = fn;\n        this.ms = ms;\n        this.bulk();\n    }\n    calc = () => {\n        delete this.pending;\n        const value = this.fn(this.p.value, this.view.value);\n        if (value === this.view.value)\n            return;\n        const o = [];\n        super.U0({ value }, o);\n        this.view.bulk(o);\n    };\n    bulk() {\n        if (this.pending)\n            return; //clearTimeout(this.pending)\n        this.pending = setTimeout(this.calc, this.ms);\n    }\n}\nclass RowOperator extends Operator {\n    process() { throw new Error('not implemented, process:', this.name); }\n    loop(C, inc, inner) {\n        const NU1 = [], NI0 = [], NR1 = [];\n        for (let i = 0; i < C.length; i += inc) {\n            const name = inner ? C[i][0] : C[i];\n            const old_val = this.view.value?.[name];\n            // console.log('loop', { name, vv: this.view.value })\n            const now_val = this.process(this.p.value[name], name, old_val);\n            const old = old_val !== undefined;\n            const now = now_val !== undefined;\n            if (old && now) {\n                NU1.push(name, now_val);\n                this.view.value[name] = now_val;\n            }\n            else if (!old && now) {\n                NI0.push(name, now_val);\n                this.view.value[name] = now_val;\n            }\n            else if (old && !now) {\n                NR1.push(name, old_val);\n                delete this.view.value[name];\n            }\n        }\n        this.view.BU1(NU1);\n        this.view.BI0(NI0);\n        this.view.BR1(NR1);\n    }\n    XU0(value) {\n        if (typeof value !== 'object')\n            return this.view.XU0(this.view.value = undefined);\n        const n = isArray(value) ? [] : {};\n        for (const i in value) {\n            const v = this.process(value[i], i, this.view.value?.[i]);\n            if (v !== undefined)\n                n[i] = v;\n        }\n        this.view.XU0(this.view.value = n);\n    }\n    BU1(U1) { this.loop(U1, 2, false); }\n    BU2(U2) { this.loop(U2, 2, true); }\n    BI0(I0) { this.loop(I0, 2, false); }\n    BI2(I2) { this.loop(I2, 3, true); }\n    BR2(R2) { this.loop(R2, 2, true); }\n    XR0() { super.XR0(); }\n    BR1(R1) {\n        const NR1 = [];\n        for (let i = 0; i < R1.length; i++) {\n            const name = R1[i++];\n            const value = this.view.value?.[name];\n            if (value !== undefined) {\n                delete this.view.value[name];\n                NR1.push(name, value);\n            }\n        }\n        this.view.BR1(NR1);\n    }\n}\nclass FilterValue extends RowOperator {\n    constructor(p, fn) {\n        super();\n        this.p = p;\n        this.n = 0;\n        this.all = 0;\n        this.fn = fn;\n        this.XU0(this.p.value);\n    }\n    process(value, name, old_val) {\n        return this.fn(value, name, old_val) ? value : undefined;\n    }\n}\nfunction get(k, r) {\n    const p = k.concat([]);\n    while (p.length)\n        r = r?.[p.shift()];\n    return r;\n}\nfunction otof(k, v, fns) {\n    if (typeof v !== 'object')\n        fns.push((r, i) => get(k, r) === v);\n    else\n        for (const i in v) {\n            otof(k.concat(i), v[i], fns);\n        }\n    return fns;\n}\nfunction match(actual, expected) {\n    if (typeof expected !== 'object')\n        return actual === expected;\n    else\n        return Object\n            .entries(expected)\n            .every(([k, v]) => match(actual?.[k], v));\n}\nclass FilterObjectValue extends FilterValue {\n    constructor(p, obj) {\n        super(p, r => match(r, obj));\n    }\n}\nclass FilterStringValue extends FilterValue {\n    constructor(p, name, value) {\n        super(p, value === undefined\n            ? r => !!r[name]\n            : r => r[name] === value);\n    }\n}\nclass FilterColumnValue extends FilterValue {\n    constructor(p, name, value) {\n        const key = [].concat(name);\n        super(p, value === undefined\n            ? r => !!get(key, r)\n            : r => get(key, r) === value);\n    }\n}\nclass MapValue extends RowOperator {\n    constructor(p, fn) {\n        super();\n        this.p = p;\n        this.fn = fn;\n        this.XU0(this.p.value);\n    }\n    process(value, name, old_val) {\n        // console.log({ name, value, old_val })\n        return this.fn(value, name, old_val);\n    }\n}\nclass GroupValue extends Value {\n    constructor(p, fn) {\n        super();\n        this.p = p;\n        this.fn = fn;\n        this.XU0(this.p.value);\n    }\n    static ArrayMapping = class {\n        map = [];\n        insert(k, v) { this.map.splice(k, 0, v); }\n        update(k, v) { this.map[k] = v; }\n        remove(k) { this.map.splice(k, 1); }\n        get(k) { return this.map[k]; }\n    };\n    static ObjectMapping = class {\n        map = new Map;\n        insert(k, v) { this.map.set(k, v); }\n        update(k, v) { this.map.set(k, v); }\n        remove(k) { this.map.delete(k); }\n        get(k) { return this.map.get(k); }\n    };\n    XR0() {\n        this.mapping = undefined;\n        // this.mapping.clear()\n        this.view.XU0(this.view.value = {});\n    }\n    XU0(value) {\n        this.mapping = isArray(value) ? new GroupValue.ArrayMapping : new GroupValue.ObjectMapping; // new Map\n        const new_value = {};\n        iter(value, (i, v) => {\n            const g = this.fn(v);\n            this.mapping.update(i, g);\n            new_value[g] ??= {};\n            new_value[g][i] = v;\n        });\n        this.view.XU0(this.view.value = new_value);\n    }\n    BR1(R1) {\n        const NR1 = [];\n        const NR2 = [];\n        for (let i = 0; i < R1.length; i++) {\n            const name = R1[i++];\n            const group = this.mapping.get(name);\n            if (group === undefined) {\n                throw new Error('unexpected group r1: ' + name + ' ' + typeof name);\n            }\n            this.mapping.remove(name);\n            const value = this.view.value[group][name];\n            // console.log({ name, group, mapping: this.mapping, value: this.view.value })\n            if (value !== undefined) {\n                delete this.view.value[group][name];\n                NR2.push([group, name], value);\n                if (isEmpty(this.view.value[group])) {\n                    NR1.push(group, this.view.value[group]);\n                    delete this.view.value[group];\n                }\n            }\n        }\n        this.view.BR1(NR1);\n        this.view.BR2(NR2);\n    }\n    BU1(U1) {\n        const NR2 = [];\n        const NU2 = [];\n        const NR1 = [];\n        const NI2 = [];\n        const removed_groups = [];\n        for (let i = 0; i < U1.length; i++) {\n            const name = U1[i++];\n            const value = U1[i];\n            const old_group = this.mapping.get(name);\n            const new_group = this.fn(value);\n            if (old_group === new_group) {\n                NU2.push([new_group, name], this.view.value[new_group][name] = value);\n            }\n            else {\n                if (old_group !== undefined) {\n                    const old_value = this.view.value[old_group][name];\n                    delete this.view.value[old_group][name];\n                    NR2.push([old_group, name], old_value);\n                    removed_groups.push(old_group);\n                }\n                this.view.value[new_group] ??= {};\n                NI2.push([new_group], this.view.value[new_group][name] = value, name);\n                this.mapping.update(name, new_group);\n            }\n        }\n        for (const group of removed_groups) {\n            if (isEmpty(this.view.value[group])) {\n                NR1.push(group, this.view.value[group]);\n                delete this.view.value[group];\n            }\n        }\n        if (NR1.length)\n            this.view.BR1(NR1);\n        if (NR2.length)\n            this.view.BR2(NR2);\n        if (NU2.length)\n            this.view.BU2(NU2);\n        if (NI2.length)\n            this.view.BI2(NI2);\n    }\n    BI0(I0) {\n        const NI2 = [];\n        for (let i = 0; i < I0.length; i++) {\n            const name = I0[i++];\n            const value = I0[i];\n            const new_group = this.fn(value);\n            this.view.value[new_group] ??= {};\n            NI2.push([new_group], this.view.value[new_group][name] = value, name);\n            this.mapping.insert(name, new_group);\n        }\n        if (NI2.length)\n            this.view.BI2(NI2);\n    }\n    BR2() { }\n    BU2() { }\n    BI2() { }\n}\nclass LengthFnValue extends Operator {\n    constructor(p, fn) {\n        super();\n        this.p = p;\n        this.fn = fn;\n        this.XU0(this.p.value);\n    }\n    XR0() {\n        this.mapping = {};\n        this.view.XU0(this.view.value = {});\n    }\n    XU0(value) {\n        const new_value = {};\n        this.mapping = {};\n        iter(value, (i, v) => {\n            if (v === undefined)\n                return; // TODO: check undef can always be removed\n            (this.mapping[i] = new_value[this.fn(v)] ??= { value: 0 }).value++;\n        });\n        this.view.XU0(this.view.value = new_value);\n    }\n    check(o) {\n        // this.view.XU0(this.view.value)\n        // const NU1 = []\n        // iter(o, (i, v) => NU1.push(i, this.view.value[i] = v))\n        // if (NU1.length) this.view.BU1(NU1)\n    }\n    BR1(R1) {\n        const updated = {};\n        const { mapping } = this;\n        for (let i = 0; i < R1.length; i++) {\n            const n = R1[i++];\n            const m = mapping[n];\n            if (!m)\n                continue;\n            m.value--;\n            mapping[n] = undefined;\n        }\n        this.view.XU0(this.view.value);\n        // this.check(updated)\n    }\n    BU1(U1) {\n        const { mapping, view, fn } = this;\n        for (let i = 0; i < U1.length; i++) {\n            const n = U1[i++];\n            const v = U1[i];\n            const og = mapping[n];\n            const ng = view.value[fn(v)] ??= { value: 0 };\n            if (og !== ng) {\n                mapping[n] = ng;\n                if (og)\n                    og.value--;\n                ng.value++;\n            }\n        }\n        this.view.XU0(this.view.value);\n        // this.check(updated)\n    }\n    BI0(I0) {\n        // console.log({ I0 })\n        const { mapping, view, fn } = this;\n        for (let i = 0; i < I0.length; i++) {\n            const n = I0[i++];\n            const v = I0[i];\n            if (v === undefined)\n                continue;\n            (mapping[n] = view.value[fn(v)] ??= { value: 0 }).value++;\n        }\n        this.view.XU0(this.view.value);\n        // this.BU1(I0) \n    }\n    BR2() { }\n    BU2() { }\n    BI2() { }\n}\nclass LengthValue extends Operator {\n    constructor(p, fn) {\n        super();\n        this.p = p;\n        // this.keys = new Map\n        this.view.value = 0;\n        this.XU0(p.value);\n    }\n    XR0() {\n        // this.keys.clear()\n        // super.XU0(this.keys.size)\n        this.view.XU0(this.view.value = 0);\n    }\n    XU0(value) {\n        // this.keys.clear()\n        // iter(value, name => this.keys.set(''+name, 1))\n        this.view.value = 0;\n        if (isArray(value)) {\n            this.view.XU0(this.view.value = value.length);\n        }\n        else {\n            iter(value, () => this.view.value++);\n            this.view.XU0(this.view.value);\n        }\n    }\n    BR1(R1) {\n        // iter2(R1, name => this.keys.delete(''+name))\n        this.view.XU0(this.view.value -= R1.length / 2);\n    }\n    BU1(U1) {\n        // console.log('U1.length :>> ', U1.length); \n        // iter2(U1, name => this.keys.set(''+name, 1))\n        // this.view.XU0(this.keys.size)\n    }\n    BI0(I0) {\n        this.view.XU0(this.view.value += I0.length / 2);\n    }\n    BR2() { }\n    BU2() { }\n    BI2() { }\n}\nclass IntersectValue extends Operator {\n    constructor(p, ...sources) {\n        super();\n        this.vp = sources[0];\n        this.p = p;\n        this.sources = new Map([[p, { one: 1, off: ~1 }]]);\n        this.all = 1;\n        for (const src of sources) {\n            const one = 1 << this.sources.size;\n            src.connect(this);\n            this.sources.set(src[Symbols.view], { one, off: ~one });\n            this.all |= one;\n        }\n        if (typeof p.value !== 'object') {\n            super.XU0();\n            return;\n        }\n        const new_value = isArray(this.p.value) ? [] : {};\n        this.filters = isArray(this.p.value) ? [] : {};\n        iter(p.value, (i, v) => {\n            for (const [res, src] of this.sources) {\n                if (i in res.value)\n                    this.filters[i] |= src.one;\n            }\n            if (this.filters[i] === this.all)\n                new_value[i] = v;\n        });\n        this.view.XU0(this.view.value = new_value);\n    }\n    XR0(_, view) {\n        const { off } = this.sources.get(view);\n        iter(this.filters, i => this.filters[i] &= off);\n        this.view.XU0(this.view.value = isArray(this.view.value) ? [] : {});\n    }\n    XU0(value, view) {\n        const { one, off } = this.sources.get(view);\n        this.view.value ??= isArray(this.p.value) ? [] : {};\n        if (typeof value !== 'object')\n            return super.XU0(C); // TODO: reset filters\n        this.filters ??= isArray(this.p.value) ? [] : {};\n        const new_value = isArray(this.p.value) ? [] : {};\n        // iter(this.view.value, (i, v) => {\n        //   if (v === undefined) return \n        //   this.filters[i] &= off\n        // }) \n        iter(this.filters, (i, v) => this.filters[i] = v & off);\n        iter(value, i => {\n            if ((this.filters[i] |= one) === this.all)\n                new_value[i] = this.p.value[i];\n        });\n        this.view.XU0(this.view.value = new_value);\n    }\n    BR1(R1, view) {\n        const { off } = this.sources.get(view);\n        const NR1 = [];\n        const zero = this.all & off;\n        this.view.value ??= isArray(this.p.value) ? [] : {};\n        for (let i = 0; i < R1.length; i += 2) {\n            const name = R1[i];\n            // const cur = this.filters[name] = old & off\n            if ((this.filters[name] & off) === zero) {\n                NR1.push(name, this.view.value[name]);\n                this.view.value[name] = undefined;\n            }\n        }\n        this.view.BR1(NR1);\n    }\n    BU1(U1) {\n        const { all, filters } = this;\n        const NU1 = [];\n        for (let i = 0; i < U1.length; i++) {\n            const name = U1[i++];\n            if (filters[name] === all) {\n                const value = this.p.value[name];\n                if (value === this.view.value[name])\n                    continue;\n                this.view.value[name] = value;\n                NU1.push(name, value);\n            }\n        }\n        this.view.BU1(NU1);\n    }\n    BI0(I0, view) {\n        const { all, sources, filters } = this;\n        const { one } = sources.get(view);\n        const me = this.view.value ??= isArray(this.p.value) ? [] : {};\n        const NI0 = [];\n        for (let i = 0; i < I0.length; i++) {\n            const name = I0[i++];\n            if ((filters[name] |= one) === all) {\n                NI0.push(name, me[name] = this.p.value[name]);\n            }\n        }\n        this.view.BI0(NI0);\n    }\n    R2() { }\n    U2() { }\n    I2() { }\n}\nconst Operators = {\n    filter: (a, b) => typeof a === 'function' ? FilterValue\n        : typeof a === 'string' ? FilterStringValue\n            : isArray(a) ? FilterColumnValue\n                : isObject(a) ? FilterObjectValue\n                    : 'unexpected filter args',\n    between: () => BetweenValue,\n    to: () => ToValue,\n    debounce: () => DebounceValue,\n    map: () => MapValue,\n    length: (fn) => typeof fn === 'function'\n        ? LengthFnValue\n        : LengthValue,\n    intersect: () => IntersectValue,\n    group: () => GroupValue,\n    za: (a, b) => typeof a === 'string' ? ZAColumnValue\n        : typeof a === 'number' ? ZANumberValue\n            : 0,\n    top: () => ZANumberValue,\n    limit: () => LimitValue\n};\nfunction create(views, name, res) {\n    views.set(name, new WeakRef(res));\n    return res;\n}\nfunction connect(p, a, b) {\n    // console.log(\"p, a, b\", p, a, b)\n    if (isArray(a)) {\n        const sink = new ArrSink(p, a);\n        // p.sinks.push(new WeakRef(sink))\n        p.sinks.add(new WeakRef(sink));\n        // console.log(\"connect\", p)\n        return a;\n    }\n    if (typeof a === 'object' && typeof b === 'string') {\n        const sink = new PropSink(p, a, b);\n        // p.sinks.push(new WeakRef(sink))\n        p.sinks.add(new WeakRef(sink));\n        return a;\n    }\n    if (typeof a === 'object' && typeof b === 'function') {\n        const sink = new FunctionSink(p, a, b);\n        // p.sinks.push(new WeakRef(sink))\n        p.sinks.add(new WeakRef(sink));\n        return a;\n    }\n    // p.sinks.push(new WeakRef(a))\n    p.sinks.add(new WeakRef(a));\n    return a;\n}\n// utils\nconst left = prop => function bisect(a, v, lo = 0, hi = a.length) {\n    while (lo < hi) {\n        const mid = lo + hi >>> 1;\n        if (prop(a[mid]) < v)\n            lo = mid + 1;\n        else\n            hi = mid;\n    }\n    return lo;\n};\nfunction bisect_right(v, lo = 0, hi = this.sorted.length) {\n    while (lo < hi) {\n        const mid = lo + hi >>> 1;\n        if (this.col(this.p.value[this.sorted[mid]]) < v)\n            hi = mid;\n        else\n            lo = mid + 1;\n    }\n    return lo;\n}\nfunction find(a, v, lo = 0, hi = a.length) {\n    while (lo < hi) {\n        const mid = lo + hi >>> 1;\n        if (a[mid] < v)\n            lo = mid + 1;\n        else\n            hi = mid;\n    }\n    return lo;\n}\nfunction isEmpty(obj) {\n    for (const i in obj)\n        return false;\n    return true;\n}\n","// @ts-nocheck\nimport { view } from \"./data.js\";\nimport { iter, isArray, noop } from \"./utils.js\";\nconst NS = 'http://www.w3.org/2000/svg';\nconst NODE = Symbol('Node');\nconst { keys } = Object;\nexport const render = (p, np) => Node.render(p, np[NODE]);\nclass DOMSink {\n    constructor(parent, node) {\n        this.parent = parent;\n        this.node = node;\n        this.p = node.data[view];\n        node.data.connect(this);\n        this.XU0(this.p.value);\n    }\n    create_node(k) {\n        const node = this.node.generate(k, k === NODE ? this.node.data : this.node.data[k]);\n        if (isArray(this.nodes)) {\n            const dom = node.create(this.parent, this.nodes[k + 1]);\n            this.nodes.splice(k, 0, dom);\n        }\n        else {\n            this.nodes[k] = node.create(this.parent);\n        }\n    }\n    remove_node(k) {\n        if (isArray(this.nodes)) {\n            this.nodes.pop().remove();\n        }\n        else {\n            this.nodes[k].remove();\n            delete this.nodes[k];\n        }\n    }\n    XR0() {\n        // console.log('DR0 :>> ', { this: this })\n        for (const i in this.nodes)\n            this.remove_node(i);\n    }\n    XU0(value) {\n        // console.log('DU0 :>> ', { this: this, value })\n        if (!this.parent.parentNode) {\n            return;\n        } // TODO: teardown?\n        const prev_nodes = this.nodes ?? {};\n        if (typeof value === 'undefined') {\n            this.nodes = {};\n            for (const i in prev_nodes)\n                this.remove_node(i);\n            return;\n        }\n        if (typeof value !== 'object') {\n            this.nodes = {};\n            for (const i in prev_nodes)\n                this.remove_node(i);\n            this.create_node(NODE);\n            return;\n        }\n        this.nodes ??= isArray(value) ? [] : {};\n        for (const i in value)\n            if (!prev_nodes[i])\n                this.create_node(i); // if (this.nodes[k]) maybe reorder\n        for (const i in prev_nodes)\n            if (!(i in value))\n                this.remove_node(i);\n    }\n    BR1(R1) {\n        // console.log('DR1 :>> ', { this: this, R1 })\n        for (let i = 0; i < R1.length; i++)\n            this.remove_node(R1[i++]);\n    }\n    BU1(U1) {\n        // console.log('DU1 :>> ', { this: this, U1 })\n        for (let i = 0; i < U1.length; i++) {\n            const name = U1[i++];\n            const value = U1[i];\n            if (!this.nodes[name])\n                this.create_node(name /*, value*/);\n        }\n    }\n    BI0(I0) {\n        // console.log('DI0 :>> ', { this: this, I0 })\n        for (let i = 0; i < I0.length; i++) {\n            const name = I0[i++];\n            const value = I0[i];\n            // if (!this.nodes[name]) \n            this.create_node(name /*, value */);\n        }\n        // if (isArray(this.p.value)) // TODO: why only arr?\n        // this.create_node(name, value)  \n    }\n    BR2(BR2) {\n        // console.log('DR2 :>> ', { this: this, BR2 })\n    }\n    BU2(U2) {\n        // console.log('DU2 :>> ', { this: this, U2  })\n        for (let i = 0; i < U2.length; i++) {\n            const [name] = U2[i++];\n            const value = U2[i];\n            // console.log({ name, value })\n            if (!this.nodes[name])\n                this.create_node(name /*, value*/);\n        }\n        // console.log('DU2 :>> ', { this: this, args })\n        // if (!this.nodes[name])\n        //   this.create_node(name, this.p.value[name]) \n    }\n    BI2(I2) {\n        // console.log('DI2 :>> ', { this: this, I2 })\n        // console.log(\"dom I2\", name)\n        // console.log('DI0 :>> ', { this: this, I2 })\n        for (let i = 0; i < I2.length; i += 3) {\n            const [name] = I2[i];\n            if (!this.nodes[name])\n                this.create_node(name /*, value */);\n        }\n    }\n}\n// true - [true]\n// false - [false]\n// undefined - [undefined]\n// null - [null]\n// '0 - [0]\n// '1 - [1]\nclass Child {\n}\nclass Node extends Child {\n    constructor(tag, ns, children = []) {\n        super();\n        this.ns = ns;\n        this.tag = tag.replaceAll('_', '-');\n        this.children = children;\n    }\n    static render(dom, node) {\n        for (const child of node.children) {\n            if (child.data) {\n                dom.sink = new DOMSink(dom, child);\n            }\n            else {\n                child.create(dom);\n            }\n        }\n        return dom;\n    }\n    get new() {\n        const node = new Node(this.tag, this.ns, this.children.concat([]));\n        node.static = this.static;\n        node.data = this.data;\n        node.fn = this.fn;\n        return node;\n    }\n    get hasdata() {\n        return this.data !== undefined || this.static !== undefined;\n    }\n    static add(node, ...args) {\n        // console.log({ args })\n        for (const arg of args) {\n            if (typeof arg === 'string' || typeof arg === 'number' || arg === true) {\n                // Text.add(node, arg)\n                node.static = [arg];\n            }\n            else if (arg instanceof NodeProxy) {\n                const child = arg[NODE];\n                if (child.static) {\n                    iter(child.static, (k, v) => node.children.push(child.generate(k, v)));\n                }\n                else if (child.fn && !child.hasdata) {\n                    node.children.push(child.generate());\n                }\n                else\n                    node.children.push(arg[NODE]);\n            }\n            else if (typeof arg === 'undefined' || arg === false) {\n                node.static = [];\n            }\n            else if (arg[view]) {\n                node.data = arg;\n            }\n            else if (typeof arg === 'function') {\n                const fn1 = node.fn;\n                node.fn = fn1 ? (n, ...args) => arg(fn1(n, ...args), ...args) : arg;\n            }\n            else if (typeof arg === 'object') {\n                node.static = arg;\n            }\n            else {\n                throw new Error('unexpted arg', arg);\n            }\n        }\n        return new NodeProxy(node);\n    }\n    create(parent, before) {\n        const dom = this.ns\n            ? document.createElementNS(NS, this.tag)\n            : document.createElement(this.tag);\n        before\n            ? parent.insertBefore(dom, before)\n            : parent.append(dom);\n        return Node.render(dom, this);\n    }\n    generate(k, v) {\n        let node = new Node(this.tag, this.ns, this.children.concat([]));\n        const content = this.fn\n            ? this.fn(new NodeProxy(node), v, k)\n            : v;\n        // console.log('generate', {v, k, node, fn: this.fn, content })\n        if (content instanceof NodeProxy) {\n            // console.log('******************************************')      \n            node = content[NODE];\n            // node = Node.add(node, content)[NODE]\n            // console.log('******************************************')      \n            // node = content[NODE]\n        }\n        else {\n            Text.add(node, content);\n        }\n        return node;\n    }\n}\nclass Prop extends Child {\n    constructor(name, value) {\n        super();\n        this.name = name;\n        this.value = value;\n    }\n    static add(node, n, v) {\n        if (arguments.length == 2)\n            v = true;\n        typeof n === 'object'\n            ? node.children.push(...keys(n).map(k => new this(k, n[k])))\n            : node.children.push(new this(n, v));\n        return new NodeProxy(node);\n    }\n    create(parent) {\n        this.parent = parent;\n        if (this.value?.[view]) {\n            parent.nrefs ??= {};\n            parent.nrefs[this.name] = this.value.connect(this, 'set');\n        }\n        else if (this.name?.[view]) {\n            parent.arefs ??= [];\n            parent.arefs.push(this.name.connect(this, 'set'));\n        }\n        else\n            this.set = this.value;\n    }\n    set set(value) {\n        value === false || value === undefined\n            ? this.remove()\n            : this.add(value);\n    }\n}\nclass Attr extends Prop {\n    add(value) { this.parent.setAttribute(this.name, value); }\n    remove() { this.parent.removeAttribute(this.name); }\n}\nclass Class extends Prop {\n    add() { this.parent.classList.add(this.name); }\n    remove() { this.parent.classList.remove(this.name); }\n}\nclass ID extends Prop {\n    add() { this.parent.id = this.name; }\n    remove() { this.parent.removeAttribute('id'); }\n}\nclass Style extends Prop {\n    add(value) { this.parent.style.setProperty(this.name, value); }\n    remove() { this.parent.style.removeProperty(this.name); }\n}\nclass Text extends Prop {\n    create(parent) {\n        parent.appendChild(this.dom = document.createTextNode(''));\n        super.create(parent);\n    }\n    add() { this.dom.textContent = this.name; }\n    remove() { this.dom.textContent = ''; }\n}\nclass Event extends Prop {\n    create(parent) {\n        parent.addEventListener(this.name.toLowerCase(), this.value);\n    }\n}\nconst props = {\n    attr: Attr,\n    class: Class,\n    on: Event,\n    style: Style,\n    id: ID,\n    text: Text,\n    nodes: Node,\n};\nclass NodeProxy {\n    constructor(node, prop) {\n        this.node = node;\n        this.prop = prop;\n        return new Proxy(noop, this);\n    }\n    set() { throw 'cannot set properties'; }\n    deleteProperty() { throw 'cannot delete properties'; }\n    get(t, name) {\n        const n = this.node;\n        if (name === NODE)\n            return n;\n        else if (typeof name === 'symbol')\n            return;\n        else if (name in props)\n            return new NodeProxy(n, name);\n        else if (name.startsWith('#'))\n            return ID.add(n.new, name.slice(1), true);\n        else if (name.startsWith('.'))\n            return Class.add(n.new, name.slice(1), true);\n        else if (name.includes('='))\n            return Attr.add(n.new, ...name.split('='));\n        else\n            return Class.add(n.new, name.replaceAll('_', '-'), true);\n    }\n    apply(t, m, args) {\n        return props[this.prop ?? 'nodes'].add(this.node.new, ...args);\n    }\n    getPrototypeOf(targer) {\n        return NodeProxy.prototype;\n    }\n}\nexport const HTML = new Proxy({}, {\n    get(t, name) { return new NodeProxy(new Node(name)); },\n});\nexport const SVG = new Proxy({}, {\n    get(t, name) { return new NodeProxy(new Node(name, true)); },\n});\n"],"names":["iter","o","fn","isArray","i","length","Array","noop","value","Symbol","$","v","ViewProxy","View","view","Symbols","random","crypto","randomUUID","sclone","d","undefined","structuredClone","Value","this","_proto","prototype","update","key","Error","XU0","BU1","BU2","insert","at","BI0","BI2","remove","XR0","BR1","BR2","BR1A","R1","NR1","_this$view$value","name","splice","push","_this$view$value2","R2","NR2","loop1","_key$slice$reverse","slice","reverse","last","path","vo","n","pop","U1","NU1","NI0","_this$view$value3","_this$view$value4","U2","_key$slice$reverse2","I0","BI0A","_i","_I0$_i","_this$view$value5","I2","_i2","_i3","_I2$_i2","Operator","_Value","apply","arguments","_inheritsLoose","res","sinks","Set","views","Map","child","p","_p$value","concat","LinkedView","_proto2","_this","each","sink","size","offset","Infinity","V1","_this$get_named","get_named","_iterator","_step","_createForOfIteratorHelperLoose","done","deref","_this2","_this$get_named2","_this$get_named3","_R2$i","rest","_this$p$value","_this3","_this3$value","_this$p$value2","_this4","_this$get_named4","_this$p$value3","_this5","_this$get_named5","_this$get_named6","_U2$i","_this$p$value4","_this6","_this$get_named7","_this7","_this$p$value5","_this8","_this$get_named8","_this$get_named9","_I2$i","some_sink","_step2","_iterator2","x","_iterator3","_step3","_step4","_iterator4","_step4$value","ref","get_or_create_named","_this$views$get$deref","_this$views$get","get","set","WeakRef","create","_this$views$get2","disconnect","_iterator5","_step5","s","connect","add","Sink","_View","_this9","call","src","_proto3","_this$src$res","_this$src$res2","U0","_this10","_this11","_this12","R0","_this13","_this14","_this15","_this16","_this17","_createClass","iter2","arr","ArrSink","_this18","type","_proto4","_this19","_this20","_this21","_this22","iter3","_this23","_this24","I1","lifetimes","WeakMap","PropSink","_Sink","obj","prop","_lifetimes$get","_this25","refs","_proto5","Proxy","_proto6","deleteProperty","target","_this$view","t","_this$view2","_this26","toPrimitive","hint","_this26$view$value","toString","iterator","reactive","m","args","_Operators$type","_this$view3","Operators","matches","_construct","getPrototypeOf","targer","_this27","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","stop","BetweenValue","_Operator","col","arg","_this28","plo","phi","sorted","find","left","_proto7","_ref","_this29","lo_index","hi_index","new_value","lo_val","hi_val","sort","a","b","va","vb","extent","_ref2","_ref3","_ref2$","_ref2$2","new_lo","new_hi","_ref4","_ref5","ti","tv","ZAValue","_Operator2","col_name","_this30","_proto8","_this31","Object","keys","map","oidx","get_index","len","nidx","hi","idx","new_idx","_R2$i2","changes","_U2$i2","_I2$i2","has","id","indexOf","lo","mid","ZAColumnValue","_ZAValue","ZANumberValue","_ZAValue2","LimitValue","_Operator3","_this32","_proto9","index","ToValue","_Operator4","_this33","_proto10","DebounceValue","_Operator5","ms","_this34","calc","pending","bulk","setTimeout","RowOperator","_Operator6","_proto12","process","loop","C","inc","inner","_this$view$value6","old_val","now_val","old","now","_this$view$value7","_this$view$value8","FilterValue","_RowOperator","_this35","all","k","r","_r","shift","match","actual","expected","entries","every","_ref6","FilterObjectValue","_FilterValue","FilterStringValue","_FilterValue2","FilterColumnValue","_FilterValue3","MapValue","_RowOperator2","_this36","GroupValue","_Value2","_this37","_proto15","mapping","_this38","ArrayMapping","ObjectMapping","_new_value$g","g","group","isEmpty","NU2","NI2","removed_groups","old_group","new_group","_this$view$value9","old_value","_this$view$value9$new","_i6","_removed_groups","_this$view$value10","_class","_proto19","_class2","_proto20","LengthFnValue","_Operator7","_this39","_proto16","_this40","_this40$fn","_new_value$_this40$fn","check","_view$value","_fn","_view$value$_fn","og","ng","_view$value2","_fn2","_view$value2$_fn","LengthValue","_Operator8","_this41","_proto17","_this42","IntersectValue","_Operator9","_this43","sources","vp","one","off","_step6","_iterator6","_assertThisInitialized","filters","_step7","_iterator7","_step7$value","_proto18","_","_this44","_this$view4","_this45","_this$sources$get2","_this$view4$value","_this$filters","_this$view5","zero","_this$view6","_this$view6$value","me","filter","constructor","between","to","debounce","intersect","za","top","limit","FunctionSink","NODE","render","np","Node","DOMSink","parent","node","data","create_node","generate","nodes","dom","remove_node","_this$nodes","parentNode","prev_nodes","Child","_Child","tag","ns","children","replaceAll","_loop","NodeProxy","hasdata","fn1","before","document","createElementNS","createElement","insertBefore","append","content","Text","Prop","_Child2","_node$children","_this$value","_this$name","nrefs","_parent$arefs","arefs","Attr","_Prop","setAttribute","removeAttribute","Class","_Prop2","classList","ID","_Prop3","Style","_Prop4","style","setProperty","removeProperty","_Prop5","appendChild","createTextNode","textContent","props","attr","class","on","_Prop6","Event","addEventListener","toLowerCase","text","startsWith","includes","split","_props","_this$prop","HTML","SVG"],"mappings":"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"}